Skip to content
You said:
After the owner chooses the establishment to log in with:
UI (v1/*owner-sphere/b2b/
{regNo}/suggestions) > Apigee > OWS backend (owner-sphere/b2b/{regNo}
/suggestions)> Apigee (what is the API endpoint that is exposed from AI ) > OSB > AI
1- Create a new proxy and a flow with this endpoint *v1/*owner-sphere/b2b/
{regNo}
/suggestions and the target server owner sphere
2- Create a developer App for the Owner Sphere and create a product for the new proxy
3- Create a new API (Request and Response) and call AI by creating a new proxy class and using the defined endpoint.
4- Create a KVM for the new API
What will happen if the AI call fails?

ููููู ุงูุชุงุณู ุฏู
ChatGPT said:
ุชูุงู ๐ ุฎูููู ุฃูุถุญูู ุงูุชุงุณู ุฎุทูุฉ ุจุฎุทูุฉ ูุจุจุณุงุทุฉ:

๐ฏ ุงููุฏู ุงูุนุงู
ุงููุฏู ุฅูู ุชุนูู ุชูุงูู (integration) ุจูู:

ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI) โ Apigee โ OWS backend โ Apigee โ OSB โ AI service

ุนูุดุงู ููุง ุงููุงูู ูุฎุชุงุฑ ุงูููุดุฃุฉ ุงููู ููุณุฌู ุงูุฏุฎูู ุจููุงุ ุงููุธุงู ููุฏุฑ ูุฌูุจ ุงูุชุฑุงุญุงุช (suggestions) ูู ุฎุฏูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI).

๐งฉ ุดุฑุญ ุงูุฎุทูุงุช ูุงุญุฏุฉ ูุงุญุฏุฉ
1๏ธโฃ Create a new proxy and a flow
ูู Apigeeุ ูุชุนูู Proxy API ุฌุฏูุฏุฉ ุงุณููุง ูุซูุงู:
v1/owner-sphere/b2b/{regNo}/suggestions

ุฏู ูุชููู ุงููุงุฌูุฉ ุงูุฎุงุฑุฌูุฉ ุงููู UI ุจูููููุง.

ูุชุฑุจุทูุง ุจู target server ุงููู ูู OWS backend (ุงููู ููุฌูุฏ ูุนูุงู).

ูุนูู UI โ Apigee (proxy ุงูุฌุฏูุฏ) โ OWS backend

2๏ธโฃ Create a Developer App + Product
ูู Apigee ูุงุฒู ุฃู Proxy ูุชุฑุจุท ุจู:

API Product โ ุจูุฌูุน ูุฌููุนุฉ APIs.

Developer App โ ุจุชูุซู ุงูุชุทุจูู ุงููู ุจูุณุชุฎุฏู ุงูู API (ูู ุงูุญุงูุฉ ุฏู โOwner Sphere Appโ).

ุงููุฏู: ุงูุชุญูู ูู ุงููุตูู (access control) ู ุงูู credentials (API key).

3๏ธโฃ Create a new API (Request and Response)
ูู OWS backend (Java / Spring):

ูุชุนูู endpoint ุฌุฏูุฏ ุจููุณ ุงูู path:
/owner-sphere/b2b/{regNo}/suggestions

ุฌูุงู ูุชูุชุจ ุงูููุฏ ุงููู ููุงุฏู ุนูู AI service.

ุนูุดุงู ุชูุงุฏู ุงูู AI:

ูุชุนูู proxy class ุฌุฏูุฏุฉ (ูุซูุงู AiServiceProxy)

ุชุณุชุฎุฏููุง ูุงุณุชุฏุนุงุก ุงูู endpoint ุจุชุงุน AI ูู ุฎูุงู ุงูู OSB.

ูุนูู Backend โ OSB โ AI

4๏ธโฃ Create a KVM for the new API
KVM = Key Value Map ูู Apigee

ุฏู ุจุชุฎุฒู ุฅุนุฏุงุฏุงุช ุญุณุงุณุฉ ุฃู URLs ุฃู ููุงุชูุญ API ุจุฏู ูุง ุชูุชุจูุง ูู ุงูููุฏ.

ููุง ูููู ุชุญุท ูุซูุงู:

URL ุจุชุงุน AI service

Token ุฃู credentials ูู ูุญุชุงุฌ

โ๏ธ ูุงุฐุง ูุญุฏุซ ูู ุงูู AI call ูุดูุ
ูู ุงูุงุชุตุงู ุจูู OWS backend ู AI ูุดู ูุฃู ุณุจุจ (timeoutุ errorุ service down):

ุงูู backend ูุงุฒู ูุชุนุงูู ูุน ุงููุดู ุจุดูู ุขูู:

ูุฑุฌุน response ูุฎุตุต ูุซูุงู:

{
  "status": "AI_UNAVAILABLE",
  "suggestions": []
}
ุฃู ูุฑุฌุน fallback data (ูุซูุงู ูู ูุงุด ูุฏูู).

Apigee ูุด ููููู ุณุจุจ ุงููุดู โ ุงูุฎุทุฃ ูููุฌู ูู ุงูู backend ููุณู.

UI ูุชุดูู ุงููุชูุฌุฉ (ุณูุงุก ูุงุถูุฉ ุฃู ูููุง error message)
ููููู ุชุนุฑุถ ุฑุณุงูุฉ ูููุณุชุฎุฏู ุฒู โNo suggestions available nowโ.

๐ ุงูู Flow ููู ุจุจุณุงุทุฉ
UI 
  โ
Apigee (proxy: /v1/owner-sphere/b2b/{regNo}/suggestions)
  โ
OWS backend (calls AI through proxy class)
  โ
OSB (middleware)
  โ
AI service
  โ
Response back (or error handled)
ูู ุชุญุจ ุฃุนููู sequence diagram ASCII (ุฑุณู ุจุณูุท ููุถุญ ุงูููู ุจุงููุงูู) ุนูุดุงู ุชุจูู ุงูุตูุฑุฉ ุฃูุถุญุ

You said:
ุงูุง ูุด ูุงููุญุงุฌู ูุนู ูู ุงูููุงู ุฏู
ChatGPT said:
ุชูุงู ๐ ููุง ููููุ ุฎูููู ุฃุดุฑุญูุง ุจุทุฑููุฉ ุจุณูุทุฉ ุฌุฏูุง ูุฃููุง ุจูุญูููุง ูุจุนุถ ูู ุงูุดุบู ๐

๐ ุงููููู ุจุจุณุงุทุฉ:
ููุง ุงููุงูู ูุฎุชุงุฑ ุงูููุดุฃุฉ ุงููู ููุณุฌู ุจููุงุ ุงูุณูุณุชู ูุญุชุงุฌ ูุฌูุจ ูู ุงูุชุฑุงุญุงุช (suggestions) ูู ุฎุฏูุฉ ุฐูุงุก ุงุตุทูุงุนู (AI).

ูุนูู ุนุงูุฒูู ูุนูู ุทุฑูู (API) ููุตู ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุญุฏ ุงูู AI.

๐งญ ุงูููุฑุฉ ุงูุนุงูุฉ:
ุงูุทุฑูู ุงููู ุงููุนูููุฉ ูุชูุดู ููู ูู ุฏู:

UI โ Apigee โ OWS backend โ OSB โ AI
๐ก ูุจุฏุฃ ุจุงูุฎุทูุงุช ูุงุญุฏุฉ ูุงุญุฏุฉ:
๐ฉ ุงูุฎุทูุฉ 1: ุชุนูู API Proxy ุฌุฏูุฏุฉ ูู Apigee
ุชุฎูููุง ูุฃูู ุจุชุนูู โุจูุงุจุฉโ ุฌุฏูุฏุฉ ูุฏุฎู ูููุง ุงูุทูุจ.
ุงุณููุง ูุซููุง:

v1/owner-sphere/b2b/{regNo}/suggestions
UI (ูุงุฌูุฉ ุงููุณุชุฎุฏู) ูุชุถุฑุจ ุนูู ุงููููู ุฏู.

Apigee ููุณุชูุจู ุงูุทูุจ.

Apigee ููุจุนุชู ููู backend (ุงููู ุงุณูู Owner Sphere backend).

๐ฆ ุงูุฎุทูุฉ 2: ุชุนูู Developer App + Product
ุฏู ุฎุทูุฉ ุฑูุชูููุฉ ูู Apigee ุนูุดุงู:

ุชุญุฏุฏ ููู ุงููู ูุณููุญ ูู ูุณุชุฎุฏู ุงูู API.

ุชุฑุจุท ุงูู proxy ุงููู ุนููุชู ุจุชุทุจูู ุงุณูู โOwner Sphere Appโ.

๐จ ุงูุฎุทูุฉ 3: backend ููููู ุงูู AI
ูู ุงูู backend (ุงูููุฏ ุงููู ุจูุบุฉ Java ุฃู Spring Boot):

ูุชุนูู API ุฌุฏูุฏุฉ ุจููุณ ุงูุงุณู:

/owner-sphere/b2b/{regNo}/suggestions
ุงูููุฏ ุฌูู ุงูู API ุฏู ููุจุนุช request ูู ุฎุฏูุฉ ุงูู AI ูู ุฎูุงู ูุณูุท ุงุณูู OSB.

ูุนูู:

OWS backend โ OSB โ AI
ูู ุงูู AI ุฑุฌุน ูุชูุฌุฉุ ุงูููุฏ ูุฑุฌุนูุง ููู frontend.
ูู ุญุตู ุฎุทุฃุ ุงูููุฏ ูุชุตุฑู.

๐ง ุงูุฎุทูุฉ 4: KVM
ูู Apigeeุ ูุชุฎุฒู ุงูููู ุงูุญุณุงุณุฉ (ุฒู URL ุจุชุงุน ุงูู AI ุฃู API key) ูู ููุงู ุงุณูู KVM ุจุฏู ูุง ุชูุชุจูุง ูู ุงูููุฏ.
ุฒู ูุฃูู ุจุชุญุท โุฅุนุฏุงุฏุงุชโ ูู ููุงู ุขูู.

๐ด ุทุจ ูู ุงูู AI ููุน ุฃู ูุดู ุงูุงุชุตุงูุ
ูุนูู ูู ููุง ุงูู backend ุญุงูู ูููู ุงูู AI ูุงูู AI ูุง ุฑุฏุด ๐

ููุญุตู ูุฏู:

ุงูููุฏ ูู ุงูู backend ูุงุฒู ูููู ุนุงูู error handling.

ูู ูุดู ุงูุงุชุตุงูุ ูุฑุฌุน ูุซูุงู response ุฒู:

{
  "status": "AI_ERROR",
  "message": "AI service not available right now"
}
ูุนูู ุงููุธุงู ูุด ูููุณุฑุ ุจุณ ููุฑุฌุน ุฑุฏ ูููู ุฅู ุงูู AI ูุด ุดุบุงู ุฏูููุชู.

๐ ุชุฎูููุง ูุฃููุง ุณูุณูุฉ
ุงูุฎุทูุฉ	ูู	ุฅูู	ุงูุบุฑุถ
1	UI	Apigee	ุงููุณุชุฎุฏู ูุทูุจ ุงูุจูุงูุงุช
2	Apigee	Backend (OWS)	ููุตูู ุงูุทูุจ ููู backend
3	Backend	OSB	ูููู ุฎุฏูุฉ ุงูู AI
4	OSB	AI	ูุฌูุจ ุงูุงูุชุฑุงุญุงุช
5	AI	Backend	ูุฑุฌุน ุงููุชูุฌุฉ
6	Backend	Apigee	ูุฑุฌุน ุงูุฑุฏ ุงูููุงุฆู
7	Apigee	UI	ููุตู ุงููุชูุฌุฉ ูููุณุชุฎุฏู
ูู ุชุญุจ ุฃุนููู ุฑุณู ุจุณูุท ููุถุญ ุงูุฎุทูุงุช ุฏู (diagram ุจุงููุต)ุ
ููุฎูู ุงูุตูุฑุฉ ุชูุตู ูู ุซุงููุฉ.

You said:
### ๐ฉ ุงูุฎุทูุฉ 1: ุชุนูู API Proxy ุฌุฏูุฏุฉ ูู Apigee

ุงุณููู ุงู
ChatGPT said:
ุญูู ๐
ูุจูู ุฅูุช ุจุชุณุฃู: ุงูู API Proxy ุงูุฌุฏูุฏุฉ ุงููู ูุชุนูููุง ูู Apigee ุฃุณูููุง ุฅููุ

ุงูุฃูุณุจ ุฅูู ุชุณูููุง ููุณ ุงุณู ุงูู endpoint ุงููู ููุชูุจ ูู ุงูุชุงุณูุ ููู ุจุดูู ููุธู ููุงุถุญ.
ูุนูู ูุซููุง:

๐น ุงูุงุณู ุงูููุชุฑุญ:
owner-sphere-b2b-suggestions-v1

ุฃู ูู ููู standard ูู ุงูุดุบู ุนูุฏูู ูุชุณููุฉ ุงูู proxiesุ ูุจูู ุชูุดู ุนููู (ูุซูุงู ูู ุงูู proxies ุชุจุฏุฃ ุจู ows-).

ูุซุงู ุชุงูู:

ows-owner-sphere-b2b-suggestions-v1

โ ุงูุณุจุจ ูู ุงูุชุณููุฉ ุฏู:
ows โ ุนุดุงู ุชุจูู ุฅููุง ุชุงุจุนุฉ ูู Owner Sphere

owner-sphere-b2b โ ุจุชูุถุญ ุงููุฌุงู (B2B module)

suggestions โ ุงุณู ุงูุฎุฏูุฉ

v1 โ ุฅุตุฏุงุฑ ุงูู API

ุชุญุจ ุฃูููู ููุงู ุฅูู ูููู ุชุณูู ุงูู API Product ู Developer App ุงููู ููุฑุชุจุทูุง ุจููุงุ

You said:

Dashboard
APIs
Publish
Analytics
Admin
Help
gosiuser@gosi.gov.sa

Dashboard /
API Proxies
Environment 
intranet



Organization 
ameenfea12



API Proxies

List
Analytics

Search

All

1-25 of 257  

Offline Trace API Proxy

API Proxy

Environments

Metrics for Last 24 Hours (intranet)

Modified

Actions

























































































































































































Traffic

Message Trend by Hour

Avg Time

Error Rate

























































































































































































TR_UpdateWorkItemAPIProxy

intranet, private

0







25 minutes ago

Delete

Roles

























































































































































































TR_FraudUpdateCaseAPIProxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































TR_FraudScenarioAPIProxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































TR_FraudCaseItemsAPIProxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































TR_FraudCaseAPIProxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































TR_FraudCase2Proxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































TR_FraudCase1Proxy

intranet, private

0







26 minutes ago

Delete

Roles

























































































































































































FS_BPMTaskUpdateAPIProxy

intranet, private, public

0







3 days ago

Delete

Roles

























































































































































































CRM_ComplaintV2APIProxy

intranet, private, public

0







4 months ago

Delete

Roles

























































































































































































CIM_ComplaintAPIProxy

intranet, private, public

0







4 months ago

Delete

Roles

























































































































































































CIM_AppealAPIproxy

intranet, private, public

0







4 months ago

Delete

Roles

























































































































































































EM_BulkSafetyInspectionAPIProxy

intranet, private

0







7 months ago

Delete

Roles

























































































































































































FS_MCIServiceAPIProxy

intranet, private, public

0







7 months ago

Delete

Roles

























































































































































































EM_EstablishmentAPIProxy

intranet, private, public

0







7 months ago

Delete

Roles

























































































































































































EM_COMMERCIALESTWSAPIProxy

public

0







7 months ago

Delete

Roles

























































































































































































DSI_GSBMCInquiryAPIProxy



0







7 months ago

Delete

Roles

























































































































































































CA_ContributorAPIProxy

intranet, private, public

0







8 months ago

Delete

Roles

























































































































































































CA_RpaAggregationAPIProxy

intranet, private, public

0







10 months ago

Delete

Roles

























































































































































































CA_PensionAggregationRequestAPIProxy



0







10 months ago

Delete

Roles

























































































































































































FS_WCCFileUploadV2APIProxy

intranet, private, public

0







a year ago

Delete

Roles

























































































































































































EM_MCIServiceAPIProxy

intranet, public

0







a year ago

Delete

Roles

























































































































































































EM_GCCEstablishmentRegistrationAPIProxy

intranet, private, public

0







a year ago

Delete

Roles

























































































































































































VM_FraudComplaintAPIProxy

intranet, private, public

0







a year ago

Delete

Roles

























































































































































































FS_SAMAAccountValidationAPIProxy

intranet

0







a year ago

Delete

Roles

























































































































































































FS_SAMAValidatetIBANV2APIProxy

intranet, private, public

0







a year ago

Delete

Roles

























































































































































































ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00

ุฏู ุดูู ุงูุจุงุชุฑู ุจุชุงุน ูุชุงุจุฉ ุงูapi proxsies
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐ฅ
ูุฏู ูุถุญุช ุงูุตูุฑุฉ ๐

ุจูุง ุฅูู ูู ุจูุฆุฉ Apigee ูุจุชุณุชุฎุฏู naming pattern ุฒู ุงููู ุธุงูุฑ ุนูุฏู (ูุซูุงู FS_, EM_, CA_, TR_ โฆ)ุ
ูุจูู ูุงุฒู ููุดู ุนูู ููุณ ููุท ุงูุชุณููุฉ ุงูุฑุณูู ุงููู ุจูุชุจุนู ุงููุฑูู.

๐งฉ ุงูุชุญููู ูู ุงููู ุงูุช ุจุนุชูู:
ูู ุงูุฃูุซูุฉ:

EM_EstablishmentAPIProxy

FS_SAMAAccountValidationAPIProxy

CA_ContributorAPIProxy

TR_FraudCaseAPIProxy

ููุฏุฑ ูุณุชูุชุฌ ุฅู ุงูุจุงุชุฑู ูู:

{ModuleCode}_{APIName}APIProxy

๐งญ ุจูุงุก ุนูู ุงูุชุงุณู ุจุชุงุนู:
ุงูุฎุฏูุฉ ุชุฎุต Owner Sphere ูุจุชุชุนุงูู ูุน B2B establishments suggestions.

ูุจูู ูุฎุชุงุฑ prefix ููุทูู:

OS ุฃู OWS โ ุงุฎุชุตุงุฑ ูู Owner Sphere

โ ุงูุชุณููุฉ ุงูููุชุฑุญุฉ:
OWS_B2BSuggestionsAPIProxy

โณ๏ธ ููู ุงูุชุณููุฉ ุฏู ูุธุจูุทุฉ:
OWS โ ุชูุถุญ ุฅููุง ุชุงุจุนุฉ ููุธุงู Owner Sphere

B2B โ ุชุจูู ููุน ุงูุฎุฏูุฉ (Business to Business)

Suggestions โ ุงุณู ุงูุนูููุฉ ุงููู ุงูู API ุจุชุนูููุง

APIProxy โ ูุชุทุงุจู ูุน ุงูุจุงุชุฑู ุงูุฑุณูู ุงููู ูู ุงูู APIs ูุงุดูุฉ ุนููู

๐งฑ ูููุซุงูุ ุจุงูู ุงูููุงูุงุช ูููู ุชุณูููุง ูุฏู:
ุงูุนูุตุฑ	ุงูุงุณู ุงูููุชุฑุญ
API Proxy	OWS_B2BSuggestionsAPIProxy
API Product	OWS_B2BSuggestionsAPIProduct
Developer App	OwnerSphereApp ุฃู OWS_B2BApp
KVM	OWS_B2BSuggestionsKVM
ุชุญุจ ุฃูููู ููุงู ุฅูู ุงูููุฑูุถ ุชุญุท ุฌูู ุงูู KVM (ุงูููู ุงููู ุชุฎุฒููุง ุฒู URLs ุฃู tokens ุจุชุงุนุฉ ุงูู AI)ุ

You said:
ุงู ุงูุฎุทูู ุงูุชุงููู
ChatGPT said:
ุฌููู ุฌุฏูุง ๐
ุจูุง ุฅูู ุฎูุตุช ุงูุฎุทูุฉ ุงูุฃููู (ุนููุช ุงูู API Proxy ุงูุฌุฏูุฏุฉ ูู Apigee ูุณููุชูุง ูุซูุงู OWS_B2BSuggestionsAPIProxy) โ
ูุจูู ูุฑูุญ ุฏูููุชู ุนูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุงููู ููุชูุจุฉ ูู ุงูุชุงุณู:

๐ฆ ุงูุฎุทูุฉ ุงูุชุงููุฉ:
Create a Developer App for the Owner Sphere and create a Product for the new proxy

ูุนูู ุฏูููุชู ูุงุฒู ุชุนูู ุญุงุฌุชูู ูู Apigee:

API Product

Developer App
ูุชุฑุจุทูู ุจุจุนุถ ูุจุงูู proxy ุงููู ูุณู ุนุงูููุง.

๐ฏ ุงููุฏู ูููุง
Apigee ูุงุฒู ูุนุฑู:

ุฅูู ุงูู APIs ุงููู ูุชุชุนุฑุถ ููุงุณุชุฎุฏุงู (ุฏู ุจุชุชุนุฑู ูู ุงูู Product)

ูููู ุงููู ูู ุตูุงุญูุฉ ูุณุชุฎุฏููุง (ุฏู ุจูุชุญุฏุฏ ูู ุฎูุงู Developer App)

๐ช ุงูุฎุทูุงุช ุงูุนูููุฉ ุจุงูุชูุตูู:
๐ข ุฃูููุง: ุฅูุดุงุก ุงูู API Product
ูู Apigee โ ุฑูุญ ุฅูู ูุงุฆูุฉ Publish โ API Products.

ุงุถุบุท ุนูู + API Product (ุฃู Create).

ุงูุชุจ ุงูุจูุงูุงุช ุงูุชุงููุฉ:

Name: OWS_B2BSuggestionsAPIProduct

Display Name: Owner Sphere B2B Suggestions

Environment: ุงุฎุชุงุฑ intranet (ุฒู ุจุงูู ุงูู APIs ุนูุฏูู)

Access: ุฎูููุง Private ุฃู ุญุณุจ ุณูุงุณุฉ ุงููุดุฑูุน.

Quota / Rate Limit: ูููู ุชุณูุจูุง ูุงุถูุฉ ูุคูุชูุง.

ูู ูุณู API Proxies:

ุฃุถู ุงูู proxy ุงููู ุนููุชูุง ูู ุงูุฎุทูุฉ ุงูุฃููู (OWS_B2BSuggestionsAPIProxy).

ุงุญูุธ ุงูููุชุฌ.

๐ข ุซุงูููุง: ุฅูุดุงุก ุงูู Developer App
ุฑูุญ ุฅูู Publish โ Developer Apps

ุงุถุบุท ุนูู + Developer App

ุงูุชุจ ุงูุจูุงูุงุช:

Name: OwnerSphereApp

Developer: ูููู ุชุฎุชุงุฑ ุงููุณุชุฎุฏู ุงููู ุฎุงุต ุจุงููุดุฑูุน (ุฒู gosiuser@gosi.gov.sa)

API Products: ุงุฎุชุงุฑ OWS_B2BSuggestionsAPIProduct

ุงุญูุธ ุงูุชุทุจูู.

ุจุนุฏ ุงูุญูุธุ Apigee ููููุฏ ูู Consumer Key ู Secret โ
ุฏูู ุงููู ุงูู backend ุฃู ุงูู UI ููุณุชุฎุฏูููู ููุง ูุณุชุฏุนู ุงูู API (Authentication).

โ ุงููุชูุฌุฉ ุจุนุฏ ุงูุฎุทูุฉ ุฏู
ูุชููู ุนุงูู ุดุจูุฉ ุงูุนูุงูุงุช ุฏู:

[Developer App: OwnerSphereApp]
           โ
           โผ
[API Product: OWS_B2BSuggestionsAPIProduct]
           โ
           โผ
[API Proxy: OWS_B2BSuggestionsAPIProxy]
ูู ุชุญุจ ุฃูููู ุฅุฒุงู ุชุฎุชุจุฑูุง ุนููููุง ูู Apigee ุจุนุฏ ูุง ุชุฎูุต ุงูุฎุทูุฉ ุฏู (ุนุดุงู ุชุชุฃูุฏ ุฅู ุงูู proxy ุดุบุงูุฉ ุชูุงู)ุ

You said:
ุงูุง ุณูุจุช ุงูุฎุทูู ุงูุงููู ูุงูุชุงููู ูุงู ุจูุธูุฑูู ุงูุฑูุฑ ุบูุฑ ูุนุฑูู ููุง ุงุนูู ูุฑูุช ููapi proxy from bundle
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐ ุดููู ูุงุดู ุตุญุ ุจุณ ุฎูููุง ูููู ุจุงูุฑุงุญุฉ ุงููุดููุฉ ุฏู ุนูุดุงู ูุญููุง ุณูุง.

โ๏ธ ุงููููู:
ุฃูุช ุจุชุญุงูู ุชุนูู API Proxy ุฌุฏูุฏุฉ ูู bundle (zip) ูู Apigee
ููู ุจูุธูุฑูู Error ุบูุฑ ูุนุฑูู (Unknown error) ููุช ูุง ุชุถุบุท "Create".

๐ ุนูุดุงู ูุนุฑู ุงูุณุจุจุ ูุญุชุงุฌูู ูููู ูฃ ุญุงุฌุงุช:
1๏ธโฃ ุฅูุช ุจุชุนูููุง ุฅุฒุงู ุจุงูุธุจุทุ
ูู:

ุงุฎุชุฑุช Develop โ API Proxies โ +Proxy โ Upload bundleุ

ููุง ุจุชุญุงูู ุชุฑูุนูุง ูู Postman ุฃู CI/CDุ

2๏ธโฃ ุงูููู ุงููู ุจุชุฑูุนู (ุงูู bundle):
ูู ูู ZIP file ูุนููู ุจุงูุทุฑููุฉ ุงูุตุญุ

ูุงุฒู ูุญุชูู ุนูู ุงููุฌูุฏุงุช:

apiproxy/
  proxies/
  targets/
  policies/
  apiproxy.xml
ูู ูุงูุต ุญุงุฌุฉ ููููุ Apigee ุจูุนูู error ุจุฏูู ุชูุงุตูู ูุงุถุญุฉ.

3๏ธโฃ ุงูู Environment ุงููู ุงุฎุชุฑุชูุ
ุชุฃูุฏ ุฅูู ุงุฎุชุฑุช environment ุงุณูู intranet (ุฒู ุจุงูู ุงูู APIs ุงููู ุนูุฏู).

ููู ุนูุฏู role ูุญุฏูุฏ (ูุด admin ูุงูู)ุ ูููู Apigee ูููุนู ุชุนูู Proxy ุฌุฏูุฏุฉ.

๐ง ุงูุฃุณุจุงุจ ุงููุญุชููุฉ (ูุงูุญููู ุงูุณุฑูุนุฉ):
ุงูุณุจุจ	ุงูุนูุงูุฉ	ุงูุญู
โ bundle ููู ูุดููุฉ ูู ุงูุจููุฉ	error ุจุฏูู ุชูุงุตูู	ูู ุงูุถุบุท ูุงุชุฃูุฏ ุฅู ููู ููู apiproxy.xml ูู ุงูุฌุฐุฑ
โ๏ธ permission issue	ุฃูุช ูุด admin ุฃู ูุด Authorized	ุฌุฑุจ ุชุณุฃู ุงูู admin ูุฏูู ุตูุงุญูุฉ apiadmin ุฃู orgadmin
๐ environment ูุด ูุชุงุญ	ููุง ุชุฎุชุงุฑ environment ุจููู ุนูุฏ "intranet"	ุงุชุฃูุฏ ุฅู environment ููุนูู
๐งฉ ุงุณู ุงูู proxy ููู ูุณุงูุงุช ุฃู ุฑููุฒ ุบุฑูุจุฉ	ุจูุธูุฑ error ููุฑู	ุงุณุชุฎุฏู ุงุณู ุจุฏูู ูุณุงูุงุชุ ุฒู: OWS_B2BSuggestionsAPIProxy
๐ token session ุงูุชูุช	ุจูุญุตู ููุง ุงูุตูุญุฉ ููุชูุญุฉ ุจูุงููุง ูุชูุฑ	ุงุนูู logout / login ูุฌุฑุจ ุชุงูู
โ ุฎุทูุงุช ุงูุชุฌุฑุจุฉ ุงูุณุฑูุนุฉ:
ุงุนูู logout ูู Apigee ูุฏุฎู ุชุงูู.

ุฌุฑุจ ุชุนูู Proxy ุฌุฏูุฏุฉ ูู ุงูุตูุฑ (not from bundle):

ุงุฎุชุงุฑ "Reverse proxy"

ุงุณููุง: OWS_B2BSuggestionsAPIProxy

Target URL: ุฃู placeholder ูุคูุช (ุฒู https://example.com)

Environment: intranet

Create

ูู ุฏู ุงุดุชุบูุช โ ูุจูู ุงููุดููุฉ ูู ุงูู bundle.

ูู ุฏู ุจุฑุถู ุนููุช ููุณ error โ ูุจูู ุตูุงุญูุงุช ุฃู ูุดููุฉ ูู ุงูู environment ููุณู.

ูู ุชุญุจุ ุงุจุนุชูู (ูู ุบูุฑ ูุนูููุงุช ุญุณุงุณุฉ) ๐:

ุฑุณุงูุฉ ุงูุฎุทุฃ ุจุงูุธุจุท ุงููู ุจุชุธูุฑ.

ุฃู ููุทุฉ ุจุณูุทุฉ ูู ุงูู bundle structure (ุงุณู ุงููููุงุช ุฌูุงู).

ูุฃูููู ุจุงูุถุจุท ุงูุณุทุฑ ุงููู ุณุจุจ ุงููุดููุฉ.

You said:
ุงูุง ุนููุช download for revision for api proxy ุจุนุฏ ูุฏู ุนููุช ูุฑูุช ูู api proxy from bundle
ChatGPT said:
ุชูุงู ๐ ุญูู ุฅูู ูุถุญุช ุงูุฎุทูุงุช โ ูุฏู ูููุช ุจุงูุถุจุท ุฅูุช ุนููุช ุฅูู.
ุฎูููู ุฃูุถุญูู ููู ุจูุญุตู ุงูู error ุฏู ูููู ุชุฎุชุงุฑ ุชุนูู ุฅูู ุจุงูุถุจุท ๐

โ๏ธ ุงููู ุญุตู ุนูุฏู ุจุงูุถุจุท:
ุฃูุช:

ูุฒูุช bundle (ููู ZIP) ุจุชุงุน API Proxy ููุฌูุฏุฉ ุจุงููุนู (download revision).

ุญุงููุช ุชุนูู Create API Proxy โ From bundle ุจููุณ ุงูู ZIP.

Apigee ุฑุฌูุนูู Unknown error.

๐ฌ ุงูุณุจุจ ุงูุฃุณุงุณู (ููู ุดุงุฆุน ุฌุฏูุง ูู Apigee):
Apigee ูุง ุจูุณูุญุด ุชุนูู import ูู bundle ููู ููุณ:

ุงุณู ุงูู proxy
ุฃู

config ูุฏูู ููู IDs ุฏุงุฎููุฉ ูุฑุชุจุทุฉ ุจุจูุฆุฉ ูุนููุฉ

ูุนูู ุงูู ZIP ุงููู ูุฒูุชู ููู metadata ุจูุฑุจุทู ุจุงูู revision ุงููุฏููุฉ.
ูููุง ุชุญุงูู ุชุฑูุนู ูู โproxy ุฌุฏูุฏุฉโุ Apigee ุจูุชูุฎุจุทุ ูููููู โunknown errorโ.

โ ุงูุญู ุงูุจุณูุท ุฌุฏูุง (ุฎุทูุฉ ุจุฎุทูุฉ):
โณ๏ธ ุงูุฎูุงุฑ 1: ูู ุนุงูุฒ ุชุนูููุง ูู Proxy ุฌุฏูุฏุฉ
ูู ุถุบุท ุงูููู (unzip).

ุงุฏุฎู ุนูู ุงูููู:

apiproxy/apiproxy.xml
ุบููุฑ ุงูุณุทุฑ ุงููู ููู:

<DisplayName>TR_FraudCaseAPIProxy</DisplayName>
<Name>TR_FraudCaseAPIProxy</Name>
ุฅูู ูุซูุงู:

<DisplayName>OWS_B2BSuggestionsAPIProxy</DisplayName>
<Name>OWS_B2BSuggestionsAPIProxy</Name>
ุงุญูุธ ุงูููู.

ุงุนูู zip ูู ุฌุฏูุฏ (zip ูุงุฒู ูุญุชูู ุนูู ูุฌูุฏ ุงุณูู apiproxy/ ูู ุงูุฌุฐุฑ).

ุงุฑุฌุน ุนูู Apigee โ Create API Proxy โ From bundle โ ูุงุฑูุน ุงูููู ุงูุฌุฏูุฏ.

๐น ูุฏู Apigee ููุนุชุจุฑูุง API ุฌุฏูุฏุฉ ุชูุงููุง ููุด ููุชุตุงุฏู ูุน ุงูุงุณู ุงููุฏูู.

โณ๏ธ ุงูุฎูุงุฑ 2: ูู ููุช ุนุงูุฒ ุชุนูู ูุฌุฑุฏ ุชุญุฏูุซ ูููุณ ุงูู Proxy ุงููุฏููุฉ
ูุชุนููุด "Create from bundle"

ุงุณุชุฎุฏู "Import revision" ุจุฏููุง:

ุงูุชุญ ุงูู Proxy ุงููุฏููุฉ

ุงุถุบุท ุนูู Revisions

ุงุฎุชุงุฑ Import revision ูุงุฑูุน ุงูููู.

ูุฏู Apigee ููููู ุฅูู ุจุชุถูู ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ููุณ ุงูู proxyุ ูุด ูุงุญุฏุฉ ุฌุฏูุฏุฉ.

โ๏ธ ูุตูุญุฉ ุณุฑูุนุฉ:
ูุจู ูุง ุชุนูู zip ูู ุฌุฏูุฏุ ุชุฃูุฏ ุฅู ูููู ุงููููุงุช ุฌูู ุงูููู ูุฏู ุจุงูุถุจุท ๐

apiproxy/
   apiproxy.xml
   proxies/
   targets/
   policies/
ูุด ูุฏู:

myproxy/apiproxy/...
(ูู ููู ูููุฏุฑ ุฒูุงุฏุฉ ููู apiproxy/ุ Apigee ูููุณุฑ.)

ูู ุชุญุจ ุชุจุนุชูู ุฃุณูุงุก ุงููููุงุช ุฃู ูุญุชูู ููู apiproxy.xml (ูู ุบูุฑ ุฃู data ุญุณุงุณุฉ)ุ
ูุฃูููู ุจุงูุถุจุท ุฅุฒุงู ุชุนุฏูู ุนูุดุงู ูุดุชุบู ูู ุฃูู ูุฑุฉุ

You said:
ุธููุฑูู ุงูุฑูุฑ ุงู ุงูุจุงูุฏู ูุงุถู ุจุนุฏ ูุง ุบูุฑุช ุงูุงุณู ูุงูุฏูุณุจูุงู ููู ูุงุณู ุงููููุฏุฑ
ChatGPT said:
ุชูุงู โ
ุงูุฑุณุงูุฉ ุงููู ุจุชููู ุฅู "the bundle is empty" ูุนูุงูุง ุฅู Apigee ููุง ุญุงูู ููุฑุฃ ุงูููู ุงูู ZIP ูุง ููุงุด ุฌูุงู ุงูุจููุฉ ุงููู ูู ูุชููุนูุง.
ูุฏู ุจูุญุตู ุจุณุจุจ ุญุงุฌุฉ ุจุณูุทุฉ ุฌุฏูุง ูู ุทุฑููุฉ ุนูู ุงูู zip ุฃู ูู ููุงู ุงููููุงุช ุฌูุงู.

ุฎูููุง ูุญูู ุฎุทูุฉ ุจุฎุทูุฉ ๐

โ๏ธ Apigee ุจููุฑุฃ ุงูู ZIP ุจุทุฑููุฉ ูุญุฏุฏุฉ ุฌุฏูุง
ูุงุฒู ุงูุจููุฉ ุงูุฏุงุฎููุฉ ุชููู ุจุงูุถุจุท ูุฏู (ูุด ุฒูุงุฏุฉ ููุง ููุต):

apiproxy/
   apiproxy.xml
   proxies/
   targets/
   policies/
ูุนูู ุฃูู ุญุงุฌุฉ ูุดูููุง Apigee ููุง ููุชุญ ุงูู ZIP ูู ูุฌูุฏ ุงุณูู apiproxy/
ูุด ุฃู ูููุฏุฑ ุชุงูู ูููู.

๐ ุงุญุชูุงููู ููุบูุท ุงููู ุญุตู:
โ ุงูุญุงูุฉ ุงูุฃููู:
ููุง ุนููุช zipุ ุญุตู ูุฏู ูุซููุง:

OWS_B2BSuggestionsAPIProxy.zip
   โโโ OWS_B2BSuggestionsAPIProxy/
         โโโ apiproxy/
             โโโ apiproxy.xml
ุฏู ุบูุท.
Apigee ููุง ุดุงูู ูููุฏุฑ ุฒูุงุฏุฉ ุงุณูู OWS_B2BSuggestionsAPIProxy ููู apiproxy/ุ
ููุง ูุนุฑูุด ููุตู ูููู apiproxy.xml โ ูููููู ุฅู ุงูู bundle ูุงุถู.

โ ุงูุญู ุงูุตุญูุญ:
ููุง ุชูุชุญ ุงูููู .zip ูุงุฒู ุชุดูู ูุจุงุดุฑุฉ ูุฌูุฏ ุงุณูู apiproxy/ ุฌูู ุงูุฌุฐุฑุ ุจุงูุดูู ุฏู:

OWS_B2BSuggestionsAPIProxy.zip
   โโโ apiproxy/
        โโโ apiproxy.xml
        โโโ proxies/
        โโโ targets/
        โโโ policies/
๐ช ุฎุทูุงุช ูุถูููุฉ ูุฅุตูุงุญ ุงูููู:
ูู ุถุบุท ุงูููู ุงููู ุนูุฏู ุญุงูููุง.

ุชุฃูุฏ ุฅู ุงููุฌูุฏ ุงูุฏุงุฎูู ุงุณูู ุจุงูุถุจุท apiproxy (ูุด apiproxy(1) ุฃู ุบูุฑู).

ุญุฏุฏ ูุฌูุฏ apiproxy ููุณู (ูุด ุงููุฌูุฏ ุงููู ูุญุชููู).

ุงุถุบุท ูููู ูููู โ Send to โ Compressed (zipped) folder
ุฃู ุงุณุชุฎุฏู ุฃู ุฃุฏุงุฉ ZIP ุจุณ ุชุฃูุฏ ุฅูู ุจุชุถุบุท ุงููุฌูุฏ apiproxy/ ููุท.

ุงููุงุชุฌ ูููู ููู ZIP ูู ุงูุฌุฐุฑ ูุญุชูู ุนูู apiproxy/.

๐ ููุงู ุชุฃูุฏ ูู:
ุงุณู ุงูููู ูู ุบูุฑ ูุณุงูุงุช ุฃู ุฑููุฒ ุนุฑุจูุฉ
ุงุณุชุฎุฏู ุงุณู ุจุณูุท ุฒู OWS_B2BSuggestionsAPIProxy.zip

ุงูุญุฌู ูุด 0 KB (ูู ูุงุถู ูุนููุงุ ุงูููู ูุด ูุนููู ุตุญ).

ุจุนุฏ ูุฏู:
ุงุฑุฌุน ูู Apigee โ Develop โ API Proxies โ +Proxy โ From bundle โ Upload ZIP ุงูุฌุฏูุฏ

ููุดุชุบู ุฅู ุดุงุก ุงููู ุจุฏูู ุฃู Error.

ุชุญุจ ุชุจุนุชูู ููุทุฉ ูู ุดูู ุงููุฌูุฏ ุนูุฏู (ุฃู ุฃุณูุงุก ุงููููุงุช ูุงููุฌูุฏุงุช ุฌูุงู)ุ
ููููู ุจุงูุถุจุท ุฅูู ุงููู ูุญุชุงุฌ ูุชุบูุฑ ูุจู ูุง ุชุนูู ุงูุถุบุท.

You said:

Dashboard
APIs
Publish
Analytics
Admin
Help
gosiuser@gosi.gov.sa

Dashboard /
API Proxies /
OSP_EstablishmentServiceAPIProxy /
Overview /
1
Organization 
ameenfea12



OSP_EstablishmentServiceAPIProxyWhat's new in the Proxy Editor

Overview
Develop
Trace
Performance

Project 

Save

Revision 1 

Deployment 

Revision 1 Summary

Created: a few seconds ago , Updated: a few seconds ago .

No description for this proxy.

Deployments

No deployments for this proxy.

Proxy Endpoints

Expand AllCollapse All

Name

Base Path

Target Endpoints

default

/v1/pension-rpa

default, cancel, cancelAggregationToGosi

Target Endpoints

Expand AllCollapse All

Name

Target

Used by Proxy Endpoints

default

none

default

cancel

none

default

cancelAggregationToGosi

none

default

ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00
ChatGPT said:
ุชูุงู โ ูุฏู ูุงุถุญ ุฌุฏูุง ุฅูู ูุฌุญุช ุชุนูู API Proxy ุฌุฏูุฏุฉ ูู Apigee
ูุงุณููุง ูู:

OSP_EstablishmentServiceAPIProxy

ูุฏู ูุนูุงู ุฅูู ุนุฏูุช ูุฑุญูุฉ ุงูู error ูุงูุญูุฏ ููู ุงูู bundle ุงุชูุจู ุจูุฌุงุญ ๐

ููู ูุงุญุธ ูุนุงูุง ุฅู ูู ุงูุตูุฑุฉ ุงููู ุจุนุชูุง:

ุงูู Proxy ุงุชุนููุช โ

ุจุณ ูุณู ููููุงุด Target Endpoint ููุง ุฃู Flow ูุนูุงู

ูููุงู ูุณู ูุด ูุชูุดูุฑุฉ (Not deployed)

ูุนูู ูุณู ูุญุชุงุฌุฉ ุดููุฉ ุฅุนุฏุงุฏ ุจุณูุท ุนูุดุงู ุชุดุชุบู ูุนูููุง ๐

๐งฉ ุงูุฎุทูุงุช ุงููู ุชุนูููุง ุจุนุฏ ูุง ุงูู Proxy ุงุชุนููุช:
1๏ธโฃ ุงูุชุญ ุงูู Proxy Endpoint
ุฑูุญ ุฅูู ุชุจููุจ Develop (ูู ููู).

ุงูุชุญ ุงูููู default.xml ุชุญุช ูุณู Proxy Endpoints.

ุฌูู ูุชูุงูู ุญุงุฌุฉ ุฒู ูุฏู:

<ProxyEndpoint name="default">
    <HTTPProxyConnection>
        <BasePath>/v1/pension-rpa</BasePath>
        <VirtualHost>default</VirtualHost>
    </HTTPProxyConnection>
    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
2๏ธโฃ ุนุฏูู ุงูู BasePath
ุบููุฑู ูู /v1/pension-rpa ุฅูู ุงููุณุงุฑ ุงููุทููุจ ูู ุงูุชุงุณู ุจุชุงุนูุ ุงููู ูู:

/v1/owner-sphere/b2b/{regNo}/suggestions
(ุทุจุนูุง {regNo} ููุง ูุฌุฑุฏ placeholderุ ูููู ุชูุชุจ /v1/owner-sphere/b2b ูุคูุชูุง).

3๏ธโฃ ุฃุถู Target Endpoint
ุชุญุช ูุณู Target Endpointsุ ุงูุชุญ ุงูููู default.xml.

ูู ูููุชู ูุงุถู ุฃู ููู noneุ ุญุท ุงููุฏู (target) ุงููู ุงูู proxy ูููุตูู โ ูุซูุงู ุงูู backend URL:

<TargetEndpoint name="default">
    <HTTPTargetConnection>
        <URL>https://ownersphere-backend.gov.sa/owner-sphere/b2b</URL>
    </HTTPTargetConnection>
</TargetEndpoint>
(ุบููุฑ ุงูู URL ุฏู ุจุงูู actual backend URL ุนูุฏูู โ ูุซูุงู ุงูู OWS endpoint.)

4๏ธโฃ ุงุญูุธ ุงูุชุนุฏููุงุช
ุงุถุบุท Save (ุฃู Ctrl + S).

5๏ธโฃ ุงูุดุฑ (Deploy)
ุงุฑุฌุน ุฅูู ุชุจููุจ Overview.

ุงุถุบุท ุนูู Deploy.

ุงุฎุชุงุฑ Environment โ intranet.

ูู ูู ุญุงุฌุฉ ุชูุงูุ ูุชุธูุฑูู ุงูุญุงูุฉ:
โ Revision 1 deployed to intranet.

6๏ธโฃ ุฌุฑูุจูุง
ุจุนุฏ ูุง ุชุชูุดุฑุ ูููู ุชุฎุชุจุฑูุง ูู Postman ุฃู ุงููุชุตูุญ:

https://{your-apigee-domain}/v1/owner-sphere/b2b/123456789/suggestions
ูู ุชุญุจ ุฃูููู ุจุงูุถุจุท ุฅุฒุงู ุชุถูู policy ุจุณูุทุฉ (ุฒู Logging ุฃู Error Handling) ุฏุงุฎููุง ูุจู ุงููุดุฑุ
ุฏู ููุฎูููุง ุดุจู ุจุงูู ุงูู APIs ุงููู ุนูุฏูู ูู Apigee.

You said:

Dashboard
APIs
Publish
Analytics
Admin
Help
gosiuser@gosi.gov.sa

Dashboard /
API Proxies /
OSP_EstablishmentServiceAPIProxy /
Develop /
1
Organization 
ameenfea12



OSP_EstablishmentServiceAPIProxyWhat's new in the Proxy Editor

Overview
Develop
Trace
Performance

Project 

Save

Revision 1 

Tools

Deployment 

Help for SelectedFlow





Navigator



OSP_EstablishmentServiceAPIProxy



Policies





AmeenSecurityCheck





Remove Header Authorization





Verify OAuth v2.0 Access Token





VerifyAPIKey



Proxy Endpoints



default

All

PreFlow

All

PostFlow



Target Endpoints



default

All

PreFlow

All

PostFlow



Resources

Flow: PreFlow



+ Step



REQUEST









RESPONSE







+ Step



Code default





Property InspectorPreFlow

PreFlow

name



Request



Response



Not deployed





ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐
ูุฏู ูุงุถุญ ุฅูู ุฏุงุฎู ูู ุดุงุดุฉ Develop ุงูุฎุงุตุฉ ุจุงูู Proxy โOSP_EstablishmentServiceAPIProxyโุ
ูุฏู ุงูููุงู ุงููู ูุนูุงู ุจูุถูู ููู ูู ุงูู logic โ ุฒู ุงูู policiesุ ุงูู routesุ ูุงูู target endpoints.

ููู ูู ุงููู ุจุงูู ูู ุงูุตูุฑุฉ:

ุงูู Proxy ุงุชุนูู โ

ููู policies ูุถุงูุฉ (ุฒู Verify OAuthุ Verify API Keyุ Remove Header Authorization...) โ

ุจุณ ูููุด Target Endpoint ูุญุฏุฏ โ

ูุงูู Proxy ูุณู Not deployed โ

ูุฏู ุงูุณุจุจ ุงููู ูุฎููู ูุด ุจูุดุชุบู ูุนูููุง.

๐งฉ ุงููู ุชุนููู ุฏูููุชู ุฎุทูุฉ ุจุฎุทูุฉ
๐น ุงูุฎุทูุฉ 1: ุงูุชุญ ุงูู Target Endpoint
ูู ุงููุงุฆูุฉ ุงููู ุนูู ุงูุดูุงูุ ุชุญุช ูุณู Target Endpointsุ ุงุถุบุท ุนูู:

default
ูุชูุชุญูู ูุงูุฐุฉ ูุงุถูุฉ ุฃู ูููุง XML ุจุณูุท.

๐น ุงูุฎุทูุฉ 2: ุถูู ุงูููุฏ ุฏู ุฏุงุฎููุง
ุงุณุชุจุฏู ุฃู ูุญุชูู ุนูุฏู ุจุงูููุฏ ุฏู ๐

<TargetEndpoint name="default">
    <HTTPTargetConnection>
        <URL>https://ownersphere-backend.gov.sa/owner-sphere/b2b</URL>
    </HTTPTargetConnection>
</TargetEndpoint>
โ๏ธ ููุงุญุธุฉ: ุบููุฑ ุงูู URL ูู ุนูุฏู ูููู ูุฎุชูู ููู backend ุงูุญูููู (ุฒู staging ุฃู dev).

๐น ุงูุฎุทูุฉ 3: ุงุฑุจุท ุงูู Proxy ุจุงูู Target
ูู ุงูู Proxy Endpoint ุจุชุงุนู ุงุณูู defaultุ ุงูุชุญู ูู:

Proxy Endpoints > default
ูุชุฃูุฏ ุฅู ุฌูู ุงูุฌุฒุก ุฏู ููุฌูุฏ ุงูุณุทุฑ ุฏู:

<RouteRule name="default">
    <TargetEndpoint>default</TargetEndpoint>
</RouteRule>
ูู ูุด ููุฌูุฏุ ุถููู ูุฏูููุง ุชุญุช <ProxyEndpoint>.

๐น ุงูุฎุทูุฉ 4: ุงุญูุธ
ุงุถุบุท ุนูู ุฒุฑ Save ููู.

๐น ุงูุฎุทูุฉ 5: ุงูุดุฑ (Deploy)
ุงุฑุฌุน ุฅูู Overview ูู ููู.

ุงุถุบุท ุนูู Deploy.

ุงุฎุชุงุฑ environment โ intranet.

ุงุณุชูู ูุธูุฑูู โ โDeployed successfullyโ.

๐น ุงูุฎุทูุฉ 6: ุงุฎุชุจุฑ
ูู Postman ุฃู ุงููุชุตูุญ:

https://ameenfea12.apigee.net/v1/owner-sphere/b2b/123456789/suggestions
ูู ุดุบุงูุ ุงูููุฑูุถ ููุตูู ุฑุฏ ูู ุงูู backend ุฃู error ูู ุนูุฏู (ุฏู ูุนูุงู ุฅู ุงูู proxy ููุณู ุดุบุงู ุชูุงู ๐ช).

ูู ุชุญุจ ุฃูููู ุจุงูุถุจุท ุงูู XML ุงููุงูู ุงูุฌุงูุฒ ููู ุงูู Proxy + Target (ุฌุงูุฒ ูููุณุฎ ูุงููุตู) ุนุดุงู ุชุชูุงุฏู ุฃู syntax errorุ

You said:
ุงูุง ุนุงูุฒ ุงุนุฑู ุงูู ูุงูุฏุฉ ุงู proxy end points and target end points
ChatGPT said:
ุณุคุงู ููุชุงุฒ ุฌุฏูุง ๐
ุฏู ูู ุฃูู ุงูููุงููู ุงููู ูุงุฒู ุชููู ูุงูููุง ูููุณ ุฌุฏูุง ูุงูุช ุดุบุงู ุนูู Apigee.
ุฎูููู ุฃุดุฑุญูุง ุจุทุฑููุฉ ุจุณูุทุฉ ูุณูุณุฉ ุจุงูุฃูุซูุฉ ๐

๐ฏ ุฃูููุง: ูุนูู ุฅูู Proxy ูู Apigeeุ
ุงูู API Proxy ูู Apigee ูู "ูุงุฌูุฉ ุฃูุงููุฉ" (facade) ุจุชูู ุจูู ุงูู client (ุฒู UI ุฃู ููุจุงูู ุฃู Postman)
ู ุงูู backend ุงูุญูููู ุงููู ุจููุฏู ุงูุฎุฏูุฉ (ุฒู ุงูู Owner Sphere backend ุฃู AI service).

ูุนูู:

ุงููุณุชุฎุฏู (ุฃู ุงูุชุทุจูู) ูุด ุจูููู ุงูู backend ูุจุงุดุฑุฉุ
ุจูููู ุงูู proxyุ ูุงูู proxy ูู ุงููู ุจูููู ุงูู backend ุจุงูููุงุจุฉ ุนูู.

โ๏ธ ููููุงุช ุงูู Proxy ุงูุฑุฆูุณูุฉ:
ุงูู Proxy ุจูุชูุณู ููุทูููุง ุฅูู ุฌุฒุฆูู:

ุงูุฌุฒุก	ุงูุงุณู ูู Apigee	ุจูุนูู ุฅููุ
ุงููุงุฌูุฉ ุงูุฃูุงููุฉ	๐น Proxy Endpoint	ุจุชุณุชูุจู ุงูู requests ูู ุงูุนุงูู ุงูุฎุงุฑุฌู (clients / UI / Postman).
ุงููุงุฌูุฉ ุงูุฎูููุฉ	๐น Target Endpoint	ุจุชุจุนุช ุงูู requests ููู backend ุงูุญูููู (ุฒู ุงูู Owner Sphere backend ุฃู AI).
๐งฉ ุฎูููุง ูุงุฎุฏ ูุซุงู ุนููู ูู ุญุงูุชู:
๐น 1. ุงูู Proxy Endpoint
<ProxyEndpoint name="default">
    <HTTPProxyConnection>
        <BasePath>/v1/owner-sphere/b2b</BasePath>
    </HTTPProxyConnection>
    
    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
๐ธ ุงููู ุจูุญุตู ููุง:

ุงูู UI (ุฃู Postman) ุจูููู:

https://ameenfea12.apigee.net/v1/owner-sphere/b2b/123456789/suggestions
Apigee ูุณุชูุจู ุงูุทูุจ ุนูู ุงูู Proxy Endpoint ุฏู.

ุจุนุฏ ูุฏูุ ููุฑุฑ ูุจุนุชู ุนูู ุงูู Target Endpoint ุงููู ุงุณูู "default".

๐น 2. ุงูู Target Endpoint
<TargetEndpoint name="default">
    <HTTPTargetConnection>
        <URL>https://ownersphere-backend.gov.sa/owner-sphere/b2b</URL>
    </HTTPTargetConnection>
</TargetEndpoint>
๐ธ ุงููู ุจูุญุตู ููุง:

Apigee ุจูุงุฎุฏ ุงูุทูุจ ุงููู ุฌุงูู ูู ุงูู Proxy Endpoint

ููุจุนุช ููุณ ุงูุทูุจ ููู backend ุงููุนูู ุงููู URL ุจุชุงุนู ููู (ุฏู ุงููู ูุนูููุง ุจูููุฐ ุงูุนูููุฉ).

๐ง ุจูุนูู ุชุงูู:
ุชูุฏุฑ ุชุนุชุจุฑูุง ุฒู:

ุงูุฏูุฑ	ุงูููุงู	ุงููุซุงู
ุงูุนููู ุงููู ุจูููู Apigee	Client (UI)	Angular app ุฃู Postman
ุงูุจูุงุจุฉ ุงููู ุจุชุญูู ูุชุชุญูู ูุชูุฌูู	Proxy Endpoint	Apigee faรงade (ูุงุฌูุฉ API)
ุงูุณูุฑูุฑ ุงูุญูููู ุงููู ุจูููุฐ ุงูุทูุจ	Target Endpoint	Owner Sphere Backend ุฃู AI service
๐ ููู ุจููุตููู ุนู ุจุนุถุ
ุนุดุงู ููุฏุฑ ูุชุญูู ูู ูู ูุฑุญูุฉ ููุญุฏูุง:

ูู Proxy Endpoint: ูุถูู security, rate limiting, logging, transformations (ูุจู ูุง ููุตู ููู backend)

ูู Target Endpoint: ูุชุญูู ูู ุงูู backend ุงููู ูููุตูู ุฃู ูุบูุฑู ุจุณูููุฉ ุจุฏูู ูุง ูุบูุฑ ุงูู frontend URL

๐งฑ ูุซุงู ูุงูุนู ูู ุดุบูู:
ูู ุงูุชุงุณู ุจุชุงุนู:

Proxy Endpoint:
/v1/owner-sphere/b2b/{regNo}/suggestions

Target Endpoint:
https://osb.gov.sa/ai/suggestions

ูุงูู UI ููููู Apigee ููุทุ
ู Apigee ุจุฏูุฑู ููููู ุงูู OSB ุฃู AI service ูู ูุฑุงุก ุงูููุงููุณ.

ูู ุชุญุจ ุฃุนููู ุฑุณู ุชูุถูุญู ุจุณูุท (diagram) ููุฑููู ุงูุนูุงูุฉ ุจูููู visuallyุ

You said:
ุฌูู ูู ูุญุฏู ูููุช pre flow and post flow
ChatGPT said:
ููุชุงุฒ ๐
ุฏูููุชู ุงูุช ุจุฏุฃุช ุชุฏุฎู ูู ุงูุนูู ุงูุญูููู ููู Apigee Proxy Logic โ
ูุฏู ุงููู ุจููุฑู ุฃู API Proxy ุดุบุงู ูููุณ ุนู API Proxy ุนุงุฏู ๐ช

ุฎูููู ุฃุดุฑุญูู ุจุจุณุงุทุฉ ุฅูู ูุนูู PreFlow ู PostFlowุ
ูุฅูู ุงููุฑู ุจูููู ูู ูู ูู ProxyEndpoint ู TargetEndpoint.

๐งฉ ุฃูููุง: ูุนูู ุฅูู Flowุ
ูู Apigeeุ ุงูู Flow ูู ุชุณูุณู ุงูุนูููุงุช (policies) ุงููู ุจุชุญุตู ุนูู ุงูู request ุฃู ุงูู response.

ูุนูู ูุซููุง:

ูุจู ูุง request ููุตู ููู backend.

ุฃู ุจุนุฏ ูุง response ูุฑุฌุน ูู ุงูู backend.

โ๏ธ ุฃููุงุน ุงูู Flows ุงูุฃุณุงุณูุฉ
ูู ูู Endpoint (ุณูุงุก Proxy ุฃู Target)ุ ุนูุฏู ุญุงุฌุชูู ุฃุณุงุณููู:

Flow	ุจูุดุชุบู ุฅูุชู	ุจูุณุชุฎุฏู ูู ุฅูู
PreFlow	ูุจู ูุง ุงูู request ูุชุญุฑู ููุฎุทูุฉ ุงูุฌุงูุฉ	ููุชุญููุ ุงููุตุงุฏูุฉุ ุฅุถุงูุฉ headersุ loggingุ ...
PostFlow	ุจุนุฏ ูุง ุงูู response ูุฑุฌุน	ูุชุนุฏูู ุงูู responseุ ุฅุฒุงูุฉ headersุ ุชูุณูู ุงูุจูุงูุงุชุ ...
๐ฏ ููู ุงููุฑู ุจูู ProxyEndpoint ู TargetEndpointุ
ุนูุฏู ุฎุท ุณูุฑ ุงูุทูุจ ููู ูุฏู ๐

Client โ ProxyEndpoint (PreFlow) โ TargetEndpoint (PreFlow)
โ [Backend] โ TargetEndpoint (PostFlow) โ ProxyEndpoint (PostFlow)
โ Client
๐ง ููุตูููู ูุงุญุฏุฉ ูุงุญุฏุฉ:
๐น 1. ProxyEndpoint
ุฏู ุงูุฌุฒุก ุงููู ุจูุชุนุงูู ูุน ุงูู client ูุจุงุดุฑุฉ.

Flow	ุงูุชูููุช	ุงูุงุณุชุฎุฏุงูุงุช ุงูุดุงุฆุนุฉ
PreFlow	ุฃูู ุญุงุฌุฉ ุจุชุญุตู ููุง request ููุตู ูู Apigee	โ ุชุญูู ูู ุงูุชููู
โ ุฅุถุงูุฉ Headers
โ Rate Limiting
โ Logging
PostFlow	ุขุฎุฑ ุญุงุฌุฉ ุจุชุญุตู ูุจู ูุง Apigee ูุฑุฏ ุนูู ุงูู client	โ ุชูุณูู ุงูู Response
โ ุฅุฒุงูุฉ Headers ุฏุงุฎููุฉ
โ ุฅุถุงูุฉ Metadata ุฃู Error Handling
๐งฑ ูุซุงู ุนููู:
<ProxyEndpoint name="default">
  <PreFlow>
    <Request>
      <Step><Name>VerifyAPIKey</Name></Step>
    </Request>
  </PreFlow>

  <PostFlow>
    <Response>
      <Step><Name>RemoveHeader.Authorization</Name></Step>
    </Response>
  </PostFlow>
</ProxyEndpoint>
ููุง Apigee ุจูุดููู ุนูู ุงูู API Key ุฃูู ูุง request ูุฏุฎู
ูุจุนุฏูู ุจูุดูู ุงูููุฏุฑ Authorization ูุจู ูุง ูุฑุฌุน ุงูู response.

๐น 2. TargetEndpoint
ุฏู ุงูุฌุฒุก ุงููู ุจูุชุนุงูู ูุน ุงูู backend ุงูุญูููู.

Flow	ุงูุชูููุช	ุงูุงุณุชุฎุฏุงูุงุช ุงูุดุงุฆุนุฉ
PreFlow	ูุจู ูุง Apigee ูุจุนุช ุงูุทูุจ ููู backend	โ ุชุนุฏูู URL
โ ุฅุถุงูุฉ backend headers
โ Prepare payload
PostFlow	ุจุนุฏ ูุง Apigee ูุณุชูุจู response ูู ุงูู backend	โ ุชุญููู ุฃู ุชุนุฏูู ุงูู response
โ ุงูุชุนุงูู ูุน errors ูู ุงูู backend
๐งฑ ูุซุงู ุนููู:
<TargetEndpoint name="default">
  <PreFlow>
    <Request>
      <Step><Name>AddBackendHeaders</Name></Step>
    </Request>
  </PreFlow>

  <PostFlow>
    <Response>
      <Step><Name>ResponseTransformation</Name></Step>
    </Response>
  </PostFlow>
</TargetEndpoint>
ููุง Apigee ุจูุถูู headers ูุจู ูุง ููููู ุงูู backend
ูุจุนุฏูู ุจุนุฏ ูุง ุงูู backend ูุฑุฏุ ุจูุญููู ุดูู ุงูู response ุนุดุงู ููุงุณุจ ุงูู UI.

๐ ูุซุงู ูุงูู ูุจุณูุท (ุฒู ุญุงูุชู ูู Owner Sphere)
Client (UI Angular) ุจูุจุนุช request:

GET /v1/owner-sphere/b2b/123/suggestions
ProxyEndpoint PreFlow:

ูุชุญูู ูู API key ุฃู OAuth token.

TargetEndpoint PreFlow:

ูุฌููุฒ ุงูู URL ุงูููุงุฆู ูู AI.

Backend (AI):

ุจูุฑุฌุน ุงูุฑุฏ ุงูุญูููู.

TargetEndpoint PostFlow:

ููุณูู ุฃู ูููุชุฑ ุงูุฑุฏ.

ProxyEndpoint PostFlow:

ูุดูู headers ุฏุงุฎููุฉ ููุถูู response metadata.

Client ูุณุชูุจู ุงูุฑุฏ ุงููุธูู.

ูู ุชุญุจ ุฃูุฑูู ุฑุณู ุชูุถูุญู ุจุณูุท (diagram) ูุดุฑุญ ุชุฑุชูุจ ุงูู flows ุจุงูุฃุณููุ
ููุฎููู ุชุญูุธูุง ูู ุฏูููุฉ ูุงุญุฏุฉ ุจุณ.

You said:
proxy endpoints

preflow
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request/>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows/>
<HTTPProxyConnection>
<BasePath>/v1/scenarios</BasePath>
<Properties/>
<VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
<RouteRule name="default">
<TargetEndpoint>default</TargetEndpoint>
</RouteRule>
</ProxyEndpoint>
 
post flow
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request/>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows/>
<HTTPProxyConnection>
<BasePath>/v1/scenarios</BasePath>
<Properties/>
<VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
<RouteRule name="default">
<TargetEndpoint>default</TargetEndpoint>
</RouteRule>
</ProxyEndpoint>
 
ุฏู ุงููู ููุฌูุฏ ุฏูููุช, ุงูุง ุนุงูุฒ ุงุนุฏูู ุจุญูุซ ูุชูุงุดู ูุน ุงูุชุงุณู ุจุชุนุชู
ChatGPT said:
ููุชุงุฒ ุฌุฏูุง ๐ช
ุฏูููุชู ุงูุช ุนุงูุฒ ุชุนุฏูู ููู ุงูู ProxyEndpoint ุนุดุงู ูุชูุงุดู ูุน ุงูุชุงุณู ุงููู ุนูุฏู โ
ุงููู ูู ุฅูุดุงุก API Proxy ููู endpoint:

/v1/owner-sphere/b2b/{regNo}/suggestions
ูุงููู ููุฑูุญ ูู ุงูููุงูุฉ ููู backend (Owner Sphere backend ุฃู AI ุนู ุทุฑูู OSB).

ุฎูููู ุฃุดุฑุญูู ุฎุทูุฉ ุจุฎุทูุฉ ุงูุชุนุฏูู ุงููู ุชุนููู ุจุงูุถุจุทุ
ูุจุนุฏูู ุฃุฏูู ุงูููุฏ ุงูุฌุงูุฒ ุงููู ุชุญุทู ููุงู ุงูููุฌูุฏ ๐

๐ฏ ุงููุฏู
ุชุนูู Proxy ุงุณูู ูุซููุง:

OSP_SuggestionsAPIProxy
ููููู ุงูู ProxyEndpoint:

ุจูุณุชูุจู requests ูู ุงูู UI ุนูู ุงููุณุงุฑ:

/v1/owner-sphere/b2b/{regNo}/suggestions
ููุชุญูู ุจุนุฏ ูุฏู ุฅูู TargetEndpoint (ููููู backend URL)

โ๏ธ ุงูุชุนุฏููุงุช ุงููุทููุจุฉ ุนูู ProxyEndpoint
๐น ุฃููุงู: ูุญุฏุซ ุงูู BasePath
ุจุฏู:

<BasePath>/v1/scenarios</BasePath>
ููุฎูููุง:

<BasePath>/v1/owner-sphere/b2b</BasePath>
๐น ุซุงูููุง: ูุถูู Policies ูู ุงูู PreFlow ู PostFlow
โ ูู ุงูู PreFlow (ูุจู ูุง ุงูู request ููุตู ููู backend)
ูุถูู ูุซูุงู:

Policy ุชุชุญูู ูู ุงูุฃูุงู (VerifyAPIKey ุฃู OAuth)

Policy ุชุดูู ุงูููุฏุฑ Authorization ูู ูุญุชุงุฌ

โ ูู ุงูู PostFlow (ุจุนุฏ ูุง ุงูู response ูุฑุฌุน)
ูุถูู:

Policy ุชูุธูู ุงูู response ุฃู ุชุดูู headers ุฏุงุฎููุฉ

๐ ุงูููุฏ ุงูููุงุฆู ุงูููุชุฑุญ ููู ProxyEndpoint
ุงูุณุฎ ุงูููุฏ ุฏู ุจุงููุงูู ูุญุทู ุจุฏู ุงููู ุนูุฏู ุญุงูููุง ูู ProxyEndpoint/default.xml:

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
  <Description>Owner Sphere B2B Suggestions Proxy</Description>

  <!-- ูู ูู Error Rules -->
  <FaultRules/>

  <!-- โ PreFlow: ูุจู ูุง request ูุฑูุญ ููู backend -->
  <PreFlow name="PreFlow">
    <Request>
      <!-- ุชุญูู ูู API Key -->
      <Step>
        <Name>VerifyAPIKey</Name>
      </Step>
      <!-- ูููู ุชุถูู Policy ุชุดูู Authorization header -->
      <Step>
        <Name>RemoveHeader.Authorization</Name>
      </Step>
    </Request>
    <Response/>
  </PreFlow>

  <!-- โ PostFlow: ุจุนุฏ ูุง response ูุฑุฌุน ูู ุงูู backend -->
  <PostFlow name="PostFlow">
    <Request/>
    <Response>
      <!-- ุชูุธูู response -->
      <Step>
        <Name>ResponseCleanup</Name>
      </Step>
    </Response>
  </PostFlow>

  <!-- ูู ุนูุฏู Flows ุฅุถุงููุฉ ููู endpoint -->
  <Flows/>

  <!-- ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู -->
  <HTTPProxyConnection>
    <BasePath>/v1/owner-sphere/b2b</BasePath>
    <Properties/>
    <VirtualHost>AmeenVH</VirtualHost>
  </HTTPProxyConnection>

  <!-- ุงูุฑุจุท ุจูู ุงูู Proxy ูุงูู Target -->
  <RouteRule name="default">
    <TargetEndpoint>default</TargetEndpoint>
  </RouteRule>
</ProxyEndpoint>
๐ก ููุงุญุธุงุช ูููุฉ
<VirtualHost>AmeenVH</VirtualHost> ูุงุฒู ููุถู ุฒู ูุง ูู ูู ุฏู ุงูุงุณู ุงููู ุจูุณุชุฎุฏู ูู ุจูุฆุฉ ุงูู intranet ุนูุฏู.

ุงูู TargetEndpoint ูุงุฒู ูููู ูุนุฑู ูู ููู ุงุณูู default.xml ุฏุงุฎู ูููุฏุฑ targets/
(ููุนุฏูู ุจุนุฏูู ุนุดุงู ููุฌูู ุงูู request ููู backend ุงูุญูููู โ ูู ุนุงูุฒ ุฃุณุงุนุฏู ููู ููุงู ุฃุนูููููู).

ุงูุณูุงุณุงุช (VerifyAPIKey, RemoveHeader.Authorization, ResponseCleanup) ูุงุฒู ุชููู ููุฌูุฏุฉ ุฏุงุฎู ูุฌูุฏ policies/.
ูู ูุด ููุฌูุฏุฉุ ููุฏุฑ ููุชุจูุง ูุฏูููุง ุจุณูููุฉ.

ูู ุชุญุจ ุฃููููู ุงูุฎุทูุฉ ุงูุฌุงูุฉ ููู ุฅุนุฏุงุฏ ููู TargetEndpoint (targets/default.xml)
ุงููู ูุฑุจุท ุงูู proxy ุฏู ูุน ุงูู backend (OSB โ AI)ุ

You said:
Policies
 
 
AmeenSecurityCheck
 
 
Remove Header Authorization
 
 
Verify OAuth v2.0 Access Token
 
 verifyApiKey

ุฏูู ุงูุจูููุณูุณ ุงููู ููุฌูุฏู ุนูุฏู, ูู ูุงูู ุงุถูููุง ูู ุงูุจุฑููุณู ุงูุฏ ุจูููุช ุฏููููุช ุงูุณูู
ChatGPT said:
ุณุคุงู ููุชุงุฒ ุฌุฏูุง ๐ ููุนูุงู ุฏู ุฎุทูุฉ ูุญูุฑูุฉ โ ูุฃู ุงูู Policies ูู ุงููู ุจุชููุฐ ุงูููุทู ุฏุงุฎู ุงูู Proxy.

ุฎูููู ุฃูุถุญูู ุจุงูุธุจุท:
โ ุฅูุชู ุชุถูููุง ูู ProxyEndpoint/default.xml
โ ูุฅูุชู ุชุณูุจูุง ุฒู ูุง ูู ูู ูููุฏุฑ policies/ ุจุณ.

๐ง ุงููุงุนุฏุฉ ุงูุนุงูุฉ
ูุฌูุฏ ุงูู Policy ูู ูููุฏุฑ policies/ ููุท โ ูุด ููุงูุฉ
ูุงุฒู ููุงู โุชุฑุจุทูุงโ ุฏุงุฎู ููู ProxyEndpoint ุฃู TargetEndpoint ุนุดุงู ุชุชููุฐ ูุนููุง โ

ุจูุนูู ุขุฎุฑ:

ูุฌูุฏ ุงูููู ูู โุชุนุฑููโ ุงูู Policy
ููู ุฅุถุงูุชู ุฌูู <Step> ูู ุงูู XML ูู โุชุดุบููโ ุงูู Policy ูู ุงูุชูููุช ุงูุตุญ (PreFlow ุฃู PostFlow).

๐ฏ ุฏูููุชู ุนูุฏู ุงูุณูุงุณุงุช ุฏู:
AmeenSecurityCheck

Remove Header Authorization

Verify OAuth v2.0 Access Token

verifyApiKey

ูุฅุฒุงู ุชุณุชุฎุฏููู ุฏุงุฎู ุงูู ProxyEndpoint/default.xml ๐

๐น ุงูุชุนุฏููุงุช ุงูููุชุฑุญุฉ ุฏุงุฎู ProxyEndpoint/default.xml
ุฎูู ุงูููุฏ ูุฏู:

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
  <Description>Owner Sphere B2B Suggestions Proxy</Description>
  <FaultRules/>

  <!-- โ PreFlow: ูุจู ูุง request ูุฑูุญ ููู backend -->
  <PreFlow name="PreFlow">
    <Request>
      <!-- ๐ ุชุญูู ูู ุงูุฃูุงู -->
      <Step>
        <Name>AmeenSecurityCheck</Name>
      </Step>

      <!-- โ ุชุญูู ูู ุงูุชููู -->
      <Step>
        <Name>Verify OAuth v2.0 Access Token</Name>
      </Step>

      <!-- โ ุชุญูู ูู ุงูู API Key -->
      <Step>
        <Name>verifyApiKey</Name>
      </Step>

      <!-- ๐ซ ุฅุฒุงูุฉ Authorization Header ูุจู ูุง ุงูุทูุจ ูุฑูุญ -->
      <Step>
        <Name>Remove Header Authorization</Name>
      </Step>
    </Request>
    <Response/>
  </PreFlow>

  <!-- โ PostFlow: ุจุนุฏ ูุง response ูุฑุฌุน -->
  <PostFlow name="PostFlow">
    <Request/>
    <Response/>
  </PostFlow>

  <Flows/>

  <HTTPProxyConnection>
    <BasePath>/v1/owner-sphere/b2b</BasePath>
    <Properties/>
    <VirtualHost>AmeenVH</VirtualHost>
  </HTTPProxyConnection>

  <RouteRule name="default">
    <TargetEndpoint>default</TargetEndpoint>
  </RouteRule>
</ProxyEndpoint>
๐ฌ ุดุฑุญ ุงููู ุจูุญุตู ุจุงูุชุฑุชูุจ:
AmeenSecurityCheck
ูุชุฃูุฏ ุฅู ุงูู request ุฌุงู ูู ูุตุฏุฑ ููุซูู (ุณูุงุณุฉ ุฏุงุฎููุฉ).

Verify OAuth v2.0 Access Token
ูุชุญูู ูู ุตูุงุญูุฉ ุงูุชููู ูู ุงูู UI ุจูุณุชุฎุฏู OAuth.

verifyApiKey
ูุชุฃูุฏ ุฅู ุงูู API Key ุตุญูุญ (ูู Apigee ุจูุณุชุฎุฏูู ููุชุญูู ูู ุงูุชุทุจููุงุช ุงููุณุฌูุฉ).

Remove Header Authorization
ุจูุดูู ุงูููุฏุฑ Authorization ูุจู ูุง ุงูุทูุจ ูุฑูุญ ููู backend (ูู ูุด ูุญุชุงุฌ ููุตูู ููุงู).

โ๏ธ ููู ุฌุฏูุง:
ุงูุฃุณูุงุก ุฏุงุฎู <Step><Name>...</Name></Step> ูุงุฒู ุชุทุงุจู ุงุณู ููู ุงูู Policy ุจุงูุธุจุท (ุจุฏูู .xml).

ุงูุชุฑุชูุจ ููู ูู ุงูุณูุงุณุงุช ุจูููู ุงุนุชูุงุฏ (ูุซูุงู ูุงุฒู ุงูุชููู ูุชุดููู ูุจู ุฅุฒุงูุฉ ุงูููุฏุฑ).

ูู ุชุญุจ ุฃููููู ุจุงูุฎุทูุฉ ุงูุฌุงูุฉุ
(ุชุนุฏูู ููู TargetEndpoint/default.xml) ุนุดุงู ุฃุฑุจุทู ุจุงูู backend ุงูุญูููู (OSB โ AI call).

You said:
ุงู ูุญุตู ูู ูุญุทุชุด ุงูุงุณุชุจุณ ุฏู ูู ุงููุงูู
ChatGPT said:
ุณุคุงู ุฐูู ุฌุฏูุง ๐
ูุฏู ูุนูุงู ุจููุฑู ุจูู ุฅู ุงูู proxy ูุดุชุบู โุธุงูุฑูุงโ ูุฅูู ูุดุชุบู ุตุญ ููุนูููุง ุขูู ููุชูุงูู.
ุฎูููู ุฃูุถุญูู ุจุจุณุงุทุฉ ูุจุงูุชูุตูู ุฅูู ุงููู ููุญุตู ูู ูุงุญุทูุชุด ุงูู Steps (ุงูู Policies) ุฏุงุฎู ProxyEndpoint/default.xml ๐

๐งฉ ุฃูููุง: ุงูุชูุถูุญ ุงูููู ุฌุฏูุง
ูุฌูุฏ ูููุงุช ุงูู Policies ูู ูููุฏุฑ policies/ ุจุณ = ูุฌุฑุฏ ุชุนุฑูู.
Apigee ูุด ุจูุดุบูููุง ุชููุงุฆููุง โ
ูุงุฒู ุชุฑุจุทูุง ูุฏูููุง ุฏุงุฎู <PreFlow> ุฃู <PostFlow> (ุฃู ุฏุงุฎู <Flows> ูุนููุฉ).
ูู ุบูุฑ ุงูุฑุจุท ุฏูุ Apigee ูุด ูููููุฐูุง ุฅุทูุงููุง.

โ๏ธ ูุนูู ุฅูู ุฏู ุนููููุงุ
ุงูุญุงูุฉ 1๏ธโฃ โ ูู ูุง ุถูุชุด ุฃู Step ุฎุงูุต ูู PreFlow
๐น Apigee ููุนุฏูู ุงูู request ุฒู ูุง ูู ุจุฏูู:

ุชุญูู ูู API Key

ุชุญูู ูู OAuth Token

ุฃูุงู ุฅุถุงูู (AmeenSecurityCheck)

๐ ุงููุชูุฌุฉ:

ุฃู ุญุฏ ูุนุฑู ุงูู URL ูููู ููููู ูุจุงุดุฑุฉ ๐ฌ

ุงูู backend ููุณุชูุจู requests ุญุชู ูู ูุณุชุฎุฏููู ุบูุฑ ูุตุฑุญ ูููู.

ุงูุณูุงุณุงุช ุงูุฃูููุฉ ุงููู ูุนููู ุจููุง ูู ูู APIs ูู GOSI ูุด ูุชุชููุฐ.

ุงูุญุงูุฉ 2๏ธโฃ โ ูู ูุง ุถูุชุด Policy ุฒู Remove Header Authorization
๐น ุงูููุฏุฑ Authorization ููููู ููู backend ููุง ูู.

๐ ุงููุชูุฌุฉ:

ูููู ุชูุตู ุจูุงูุงุช ุญุณุงุณุฉ ุฃู ุชููู ุฏุงุฎูู (introspection token) ููู backendุ ูุฏู ุฎุทุฑ.

ูููู backend ูุฑูุถ ุงูุทูุจ ูุฃูู ุดุงูู Authorization ุบูุฑ ูุชูููุน.

ุงูุญุงูุฉ 3๏ธโฃ โ ูู ูุง ุถูุชุด VerifyAPIKey ุฃู Verify OAuth v2.0 Access Token
๐น ูุงููุด ูุตุงุฏูุฉ ุนูู ุงูุฅุทูุงู.

๐ ุงููุชูุฌุฉ:

ุงูู API Proxy ููุจูู ููุชูุญ ูุฃู ุทูุจ ุฌุงู.

ุญุชู ูุณุชุฎุฏู ูุด ููุณุฌู ูู Developer App ูููุฏุฑ ูููุฐ ุงูู API.

ูู ุงูู Apigee ูุฑุจูุท ุจุณูุงุณุงุช product ูAppุ ูุชุธูุฑูู Unauthorized (401) ููุง ุงูู UI ูุฌุฑุจ ูุฃูู ูุด ููุชุญูู ููู.

ุงูุญุงูุฉ 4๏ธโฃ โ ูู ูุง ุถูุชุด AmeenSecurityCheck
๐น ุฏู ุนุงุฏุฉู ุณูุงุณุฉ custom ุฏุงุฎููุฉ ุจุชุนูู ูุญุต ุฃููู ุฅุถุงูู (ุฒู check ุนูู headers ุฃู tokens ุฏุงุฎููุฉ ุจูู ุงูุฃูุธูุฉ).

๐ ุงููุชูุฌุฉ:

ูุชุฎุฑูู standard ุงูุฃูุงู ุงูุฏุงุฎูู ุจุชุงุน ุจูุฆุฉ GOSI ุฃู AMEEN.

ูููู ุงูู proxy ูุชููุน ูู ุงูู deployment ูู ุจูุฆุฉ UAT ุฃู Production (ูุฃู ุงูู security validation ุจููุดู).

โ ุงูุฎูุงุตุฉ:
ูู ุถูุช ุงูู Steps	ูู ูุง ุถูุชูุงุด
โ ูุชุญูู ุงูุฃูุงู (API Key + OAuth)	โ ุฃู ุญุฏ ููุฏุฑ ูุณุชุฏุนู ุงูู API
โ ุฅุฒุงูุฉ headers ุงูุญุณุงุณุฉ	โ ูููู ุชุณุฑูุจ Authorization
โ ุงูุชูุงูู ูุน ุณูุงุณุงุช GOSI	โ ูููู ูุชููุน ูู ุงูุงุนุชูุงุฏ ุฃู ุงููุดุฑ
โ backend ูุณุชูุจู request ูุธูู ูุขูู	โ backend ูุณุชูุจู ุจูุงูุงุช ุบูุฑ ูุตุฑุญ ุจูุง
๐ก ููุฎุต ูู ุฌููุฉ:

ูู ูุง ุญุทูุชุด ุงูู Stepsุ ุงูู proxy ููุดุชุบู โูููููุงโุ
ุจุณ ููููุฏ ูู ูุธุงุฆู ุงูุฃูุงู ูุงูุชุญูู ุงููู ูุนููู ุนูุดุงููุง Apigee ุฃุตูุงู.

ูู ุชุญุจ ุฃูููู ุฅูู ุฃูู 3 Policies ุถุฑูุฑูุฉ ูุงุฒู ุชุณูุจูุง ุนูู ุงูุฃูู ุนุดุงู ุงูู proxy ูุดุชุบู ุจุฃูุงูุ

You said:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TargetEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request/>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows/>
<HTTPTargetConnection>
<LoadBalancer>
<Server name="APPServer"/>
</LoadBalancer>
<Path>/scenarios</Path>
</HTTPTargetConnection>
</TargetEndpoint>

ุฏู ุงูุชุงุฑุฌุช ุงูุฏ ุจูููุช ูููุงูู
ChatGPT said:
ููุชุงุฒ ุฌุฏูุง ๐
ุงูููู ุงููู ุงูุช ุญุงุทู ุฏู ูู ููู TargetEndpointุ ูุฏู ูุนูุงู ูุณุคูู ุนู ุชูุฌูู ุงูุทูุจ ูู Apigee ุฅูู ุงูู backend ุงูุญูููู.

ุฏูููุชู ุฎูููู ุฃุดุฑุญูู:
1๏ธโฃ ุฅูู ูุนูู ุงููู ููุชูุจ ููู ุฏูููุชู
2๏ธโฃ ููู ูุญุชุงุฌ ุชุนุฏูู
3๏ธโฃ ุฅุฒุงู ุชุนููู ุตุญ ุจุญูุซ ูุชูุงุดู ูุน ุงูุชุงุณู ุจุชุงุนู (/v1/owner-sphere/b2b/{regNo}/suggestions โ OSB โ AI)

๐ง ุฃูููุง: ุดุฑุญ ุงูููุฏ ุงููู ุนูุฏู ุญุงูููุง
<HTTPTargetConnection>
  <LoadBalancer>
    <Server name="APPServer"/>
  </LoadBalancer>
  <Path>/scenarios</Path>
</HTTPTargetConnection>
ุฏู ูุนูุงู:

Apigee ุจูุจุนุช ุงูู request ุฅูู ุณูุฑูุฑ ุงุณูู APPServer (ูุฏู ุจูููู ูุชุนุฑูู ูู TargetServers section ูู Apigee).

ูุจูุฒูุฏ ุนููู ุงููุณุงุฑ /scenarios.

ูุนูู ูู ุงูู APPServer URL ูุซููุง = https://ownersphere.gov.sa,
ูุงูู request ุงูููุงุฆู ููุจูู:

https://ownersphere.gov.sa/scenarios
๐ฏ ุงููุทููุจ ููู ูู ุงูุชุงุณู
ุงูุชุงุณู ุจูููู ุฅูู ุชุนูู API Proxy ุฌุฏูุฏ ููุณุงุฑ:

/v1/owner-sphere/b2b/{regNo}/suggestions
ูุฏู ุงูููุฑูุถ ูุฑูุญ ููู backend (Owner Sphere) ุฃู ุงูู AI service ุนุจุฑ ุงูู OSB.

ูุฃูุช ูุญุชุงุฌ ุชุฎูู ุงูู TargetEndpoint ููุฌูู ุงูู request ููู backend ุงูุตุญ.

โ ุงูุชุนุฏูู ุงูุตุญูุญ ุงูููุชุฑุญ
ุฎูู ุงูููุฏ ูุฏู:

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TargetEndpoint name="default">
  <Description>Target endpoint for Owner Sphere Suggestions API</Description>
  <FaultRules/>

  <!-- โ ูุจู ูุง request ูุฑูุญ ููู backend -->
  <PreFlow name="PreFlow">
    <Request>
      <!-- ูู ุญุจูุช ุชุถูู header ุฃู logging -->
    </Request>
    <Response/>
  </PreFlow>

  <!-- โ ุจุนุฏ ูุง response ูุฑุฌุน ูู ุงูู backend -->
  <PostFlow name="PostFlow">
    <Request/>
    <Response>
      <!-- ูููู ุชุถูู response transformation ุฃู cleanup -->
    </Response>
  </PostFlow>

  <Flows/>

  <!-- ๐ ุฅุนุฏุงุฏ ุงูุงุชุตุงู ุงููุนูู -->
  <HTTPTargetConnection>
    <LoadBalancer>
      <!-- ุฏู ุงุณู ุงูู Target Server ุงููู ูุนุฑู ูู Apigee -->
      <Server name="OSBServer"/>
    </LoadBalancer>

    <!-- ุฏู ุงููุณุงุฑ ุฏุงุฎู ุงูู backend -->
    <Path>/owner-sphere/b2b</Path>
  </HTTPTargetConnection>
</TargetEndpoint>
๐งฉ ุดุฑุญ ุงูููุงุท ุงููููุฉ:
ุงูุนูุตุฑ	ุงููุนูู
<Server name="OSBServer"/>	ุฏู ุงุณู ุงูุณูุฑูุฑ ุงููู ููููู ุงูู backend (ูุชุนุฑู ูู Apigee โ Target Servers section). ูููู ูููู ุงุณูู ูุฎุชูู ุนูุฏูู (ุฒู OWNERSPHERE_SERVER ุฃู AI_SERVER).
<Path>/owner-sphere/b2b</Path>	ุฏู ุงูุฌุฒุก ุงููู ุจูุชุฒูุฏ ุนูู ุงูู URL ูู ุงูุณูุฑูุฑ ุงููุฏู.
<PreFlow>	ุชูุฏุฑ ุชุณุชุฎุฏูู ูู ุนุงูุฒ ุชุถูู headers ุฒู x-api-key ุฃู x-trace-id.
<PostFlow>	ุชุณุชุฎุฏูู ูู ุญุงุจุจ ุชูุณูู ุงูุฑุฏ ูู ุงูู backend.
๐ ูุซุงู ุนููู ูุงูู ุนูู ุงูุฑุญูุฉ ุจุนุฏ ุงูุชุนุฏูู
ุงููุฑุญูุฉ	URL
Client (UI)	https://ameenfea12.apigee.net/v1/owner-sphere/b2b/123456789/suggestions
Apigee Proxy Endpoint	/v1/owner-sphere/b2b
Apigee Target Endpoint	/owner-sphere/b2b
Backend (OSB โ AI)	https://osb.gov.sa/owner-sphere/b2b/123456789/suggestions
๐ก ููุงุญุธุฉ ูููุฉ:
ุชุฃูุฏ ุฅู:

ุงุณู ุงูุณูุฑูุฑ ุงููู ูู <Server name="..."/> ููุฌูุฏ ูุนูุงู ูู Apigee โ Environment โ Target Servers
(ูู ูุด ููุฌูุฏ ูููู ุชุนูู ูุงุญุฏ ุฌุฏูุฏ ูุชุญุฏุฏ ููู ุงูู URL ุงููุนูู ุจุชุงุน ุงูู OSB ุฃู AI)

ุงูู BasePath ูู ProxyEndpoint ูุทุงุจู ููู path ูู TargetEndpoint.

ูู ุชุญุจ ุฃูููู ุฏูููุชู ุฅุฒุงู ุชุชุฃูุฏ ุฅู ุงูู Target Server (OSBServer) ูุชุณุฌู ููุฑุจูุท ุตุญ ูู Apigeeุ

You said:
ุงููู
ChatGPT said:
ุชูุงู ๐
ุฎูููุง ููุดู ุฎุทูุฉ ุจุฎุทูุฉ โ ููุฑุงุฌุน ูุน ุจุนุถ ุฅุฒุงู ุชุชุฃูุฏ ุฅู ุงูู Target Server (ุงููู ูู OSBServer ูุซููุง) ูุชุณุฌู ููุฑุจูุท ุตุญ ูู Apigeeุ ูุฃู ุฏู ุฌุฒุก ุฃุณุงุณู ุนุดุงู ุงูุจุฑููุณู ููุฏุฑ ููุตูู ุงูุทูุจ ููู backend.

๐ ุงูุฎุทูุฉ 1: ุงูุชุญ ุฅุนุฏุงุฏุงุช ุงูู Environment
ูู Apigee dashboardุ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุงุฎุชุฑ:
Admin โ Environments
(ุฃู ูู ุจุนุถ ุงูุฅุตุฏุงุฑุงุช: ูู ุงููุงุฆูุฉ ููู ุงุฎุชุงุฑ ุงูุจูุฆุฉ ameenfea12 ุซู "Target Servers").

ูุชูุงูู ูู ุงูู environments ุงููู ุนูุฏู (ุฒู: test, prod, ameenfea12).

ุงุถุบุท ุนูู ุงูุจูุฆุฉ ุงููู ุงูุช ุดุบุงู ูููุง (ูู ุญุงูุชู ูุงุถุญ ุฅููุง ameenfea12).

๐งฉ ุงูุฎุทูุฉ 2: ุงูุชุญ ูุงุฆูุฉ Target Servers
ุจุนุฏ ูุง ุชูุชุญ ุงูุจูุฆุฉ:

ูุชูุงูู ุชุจููุจ ุงุณูู Target Servers ุฃู Servers
(ุนูู ุญุณุจ ูุงุฌูุฉ Apigee ุนูุฏูู โ ูู ุจุนุถ ุงูุฅุตุฏุงุฑุงุช ุจูููู ุนูู ุงููููู ุฃู ุชุญุช).

โ๏ธ ุงูุฎุทูุฉ 3: ุดูู ุงูุณูุฑูุฑ ุงููู ูุญุชุงุฌู
ุงูุชุญ ุงูุณูุฑูุฑุงุช ุงููุณุฌูุฉ ุนูุฏู ูุดูู ูู ูู ูุงุญุฏ ุงุณูู ูุซูุงู:

OSBServer
ุฃู

OWNERSPHERE_SERVER
ุฃู ุฃู ุงุณู ูุดุงุจู.

ูู ููุฌูุฏ โ ุชูุงูุ ุชุฃูุฏ ูู ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ:

ุงูุญูู	ุงููููุฉ ุงููุทููุจุฉ
Name	ููุณ ุงูุงุณู ุงููู ุงุณุชุฎุฏูุชู ูู ููู TargetEndpoint.xml
Host	ุงูู domain ุงููุนูู ุจุชุงุน ุงูู backend (ูุซูุงู osb.gosi.gov.sa)
Port	443 (ูู HTTPS)
SSL Enabled	โ๏ธ ููุนูู ูู ุงูุณูุฑูุฑ ุจูุณุชุฎุฏู HTTPS
๐ ุงูุฎุทูุฉ 4: ูู ุงูุณูุฑูุฑ ูุด ููุฌูุฏ โ ุฃูุดุฆู ุฌุฏูุฏ
ูู ูุด ูุงูู ุงูุณูุฑูุฑ ุงููู ูุญุชุงุฌู:

ุงุถุบุท Add Target Server.

ุงููุฃ ุงูููู ุฏู:

ุงูุญูู	ุงููููุฉ ุงูููุชุฑุญุฉ
Name	OSBServer
Host	osb.gosi.gov.sa (ุฃู ุงูู endpoint ุงููุนูู ุงููู ุจูููู ุงูู backend)
Port	443
SSL Enabled	โ
Enabled	โ
ุซู ุงุถุบุท Save.

โ ุงูุฎุทูุฉ 5: ุงุฑุจุทู ูุน ุงูู TargetEndpoint
ุงุฑุฌุน ุฏูููุชู ุฅูู ููู TargetEndpoint.xmlุ ูุชุฃูุฏ ุฅู ุงุณู ุงูุณูุฑูุฑ ูู ููุณ ุงูุงุณู ุจุงูุถุจุท:

<Server name="OSBServer"/>
ูู ุงุณู ุงูุณูุฑูุฑ ูู Apigee ูุซููุง ูู OwnerSphereServerุ ูุงุฒู ุชุบูุฑู ูุฏู:

<Server name="OwnerSphereServer"/>
๐ง ูุซุงู ุนููู ูุชูุงูู
1๏ธโฃ Target Server (ูู Apigee UI)
Name	Host	Port	SSL
OSBServer	osb.gosi.gov.sa	443	โ
2๏ธโฃ TargetEndpoint.xml
<HTTPTargetConnection>
  <LoadBalancer>
    <Server name="OSBServer"/>
  </LoadBalancer>
  <Path>/owner-sphere/b2b</Path>
</HTTPTargetConnection>
ูู ุญุงุจุจุ ุชูุฏุฑ ุชุจุนุชูู ููุทุฉ (ุฃู ูุต ุงูุฅุนุฏุงุฏุงุช) ุงูุฎุงุตุฉ ุจุงูู Target Server ุงููู ุนูุฏูุ ูุฃูุง ุฃูููู ูู ูุญุชุงุฌ ุชุนุฏูู ูููุง.
ูู ุชุญุจ ุฃุดุฑุญ ููุงู ุฅุฒุงู ุชุชุฃูุฏ ุฅู ุงูุงุชุตุงู ูุนูุงู ุดุบุงู ูู Apigee ููู backend (ุจูุนูู: ุชุฌุฑุจุฉ ุงูู Target Server ููุณู)ุ

You said:
ูุด ุนุงุฑู ุงูุตู ููุณูุฑูุฑุงุช ุงููุชุณุฌูู ุนูุฏู
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐ช ุฎูููุง ูุญููุง ุฎุทูุฉ ุจุฎุทูุฉ ูุฃู ูุงุฌูุฉ Apigee Edge / X ุจุชุฎุชูู ูู ุฅุตุฏุงุฑ ูุฅุตุฏุงุฑุ ูููููู ุงูุทุฑููุฉ ุงูุนุงูุฉ + ุงูุจุฏููุฉ ูู ุงููุงุฌูุฉ ูุฎุชููุฉ ุนูุฏู.

๐งญ ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ (ูู ุงูู UI)
๐น ุงูุฎุทูุฉ 1: ุงูุชุญ ุงูู Admin ุฃู ุงูู Environment
ูู ุงูุดุฑูุท ุงููู ููู (ุฃู ุงูุฌุงูุจ)ุ ุดูู ุงูููุงุฆู ุฏู:

Dashboard | APIs | Publish | Analytics | Admin | Help

ุงุถุบุท ุนูู Admin โ

๐น ุงูุฎุทูุฉ 2: ุงุฎุชุงุฑ ุงูู Environment
ุจุนุฏ ูุง ุชุฏุฎู ุนูู Admin:

ูู ุงูุฌุฒุก ุงูุนููู ูุชูุงูู ุงุฎุชูุงุฑ ุงูุจูุฆุฉ (environment)
ูุซูุงู:

Organization: ameenfea12
Environments: test / prod / ameenfea12
ุงุฎุชุงุฑ ุงูุจูุฆุฉ ุงููู ุงูุช ุดุบุงู ูููุง (ุบุงูุจูุง ameenfea12).

๐น ุงูุฎุทูุฉ 3: ุงุฏุฎู ุนูู โTarget Serversโ
ุจุนุฏ ูุง ุชุฎุชุงุฑ ุงูุจูุฆุฉุ ูุชูุงูู ุชุจููุจ ุฃู ูุณู ุงุณูู:

Target Servers

ุฃู ุฃุญูุงููุง ูููู ุชุญุชู Environment Configuration โ Target Servers

ูู ุฏู ุงูุตูุญุฉ ุงููู ูููุง ูู ุงูุณูุฑูุฑุงุช ุงููุณุฌููุฉ.

โ๏ธ ุงูุทุฑููุฉ ุงูุจุฏููุฉ (ูู ูุง ุธูุฑุชุด ูู ุงูู UI)
ุจุนุถ ุญุณุงุจุงุช Apigee ุจูููู ูููุง ุตูุงุญูุงุช ูุญุฏูุฏุฉ ููุง ุจูุธูุฑุด ูููุง ุงูู Admin tab.
ูู ุงูุญุงูุฉ ุฏูุ ุชูุฏุฑ ุชุดูู ุงูุณูุฑูุฑุงุช ุงููุณุฌููุฉ ุจู API call ูู ุฎูุงู Apigee API ููุณูุง ๐

๐ก ุงุณุชุฎุฏู Apigee Management API
ุงูุชุญ Postman ุฃู ุฃู ุฃุฏุงุฉ API ูุฌุฑูุจ ุงูุทูุจ ุฏู:

GET https://api.enterprise.apigee.com/v1/organizations/ameenfea12/environments/{env}/targetservers
ุงุณุชุจุฏู {env} ุจุงุณู ุงูุจูุฆุฉ ุงููุนูู (ูุซูุงู test ุฃู ameenfea12).

ูุถูู Authorization header:

Authorization: Basic {base64(username:password)}
ูู ุงูุตูุงุญูุงุช ุชูุงูุ ููุฑุฌุนูู JSON ููู ูู ุงูุณูุฑูุฑุงุช ุงููู ูุชุณุฌููุฉ.
ูุซูุงู:

[
  {
    "name": "OSBServer",
    "host": "osb.gosi.gov.sa",
    "port": 443,
    "isEnabled": true
  }
]
๐ง ูู ุจุฑุถู ูุด ุธุงูุฑ
ุฏู ูุนูุงู ุฅู ุญุณุงุจู (user role) ูููุด ุตูุงุญูุฉ ูุดูู ุฃู ูุนุฏูู ุงูู Target Servers.
ูู ุงูุญุงูุฉ ุฏู:

ูุงุฒู ุชุฑุงุณู ุงูู Apigee admin ูู ุงููุฑูู ุนูุฏูู (ุบุงูุจูุง DevOps ุฃู Integration team)
ูุชุทูุจ ููู ูุง:

ูุถูููู ุตูุงุญูุฉ Environment Admin

ุฃู ูุจุนุซูู ูุงุฆูุฉ ุงูุณูุฑูุฑุงุช ุงููุณุฌูุฉ ุจุงููุนู

ูู ุชูุฏุฑ ุชุจุนุชูู ุณุทุฑ ุฃู ุตูุฑุฉ ูููุง ุงูู URL ุงููู ูู ุงููุชุตูุญ ููุง ุชููู ูุงุชุญ ุตูุญุฉ ุงูู API Proxyุ
(ูุชููู ุญุงุฌุฉ ุฒู
https://apigee.google.com/edge/proxy-edit/ameenfea12/OSP_EstablishmentServiceAPIProxy/revision/1/develop)
ุนูุดุงู ุฃูููู ุจุงูุถุจุท ููู ููุงู ุงูู Target Servers ุนูุฏู ูู ุงููุงุฌูุฉ ุงูุญุงููุฉ.

You said:

Dashboard
APIs
Publish
Analytics
Admin

Organization Users
Organization Roles
TLS Certificates
Organization History
Help
gosiuser@gosi.gov.sa

Dashboard /
Organization Users
Organization 
ameenfea12



Organization Users

Search

All

1-5 of 5  

User

User

Email

Roles

Actions

































































































































































































admin admin

AAMEEN@gosi.gov.sa

Organization Administrator

Remove

































































































































































































Ameen DEV

ameen@gosi.gov.sa

Organization Administrator

Remove

































































































































































































ameenuser@gosi.gov.sa

ameenuser@gosi.gov.sa

readonly

Remove

































































































































































































gosiuser@gosi.gov.sa

gosiuser@gosi.gov.sa

Organization Administrator

Remove

































































































































































































tcsuser@gosi.gov.sa

tcsuser@gosi.gov.sa

Organization Administrator

Remove

































































































































































































ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00
ChatGPT said:
ุชูุงู โ
ูุฏู ูุงุถุญ ุฅูู ูุงุชุญ ุชุจููุจ Admin โ Organization Usersุ ูุฏู ุฎุงุต ุจุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช โ ูุด ุฅุนุฏุงุฏุงุช ุงูู Target Servers.

ุงููู ุงูุช ูุญุชุงุฌ ุชูุตูู ูู ููุงู Target Servers ุฏุงุฎู Environment Configuration.
ุฎูููู ุฃูุฌููู ุจุงูุถุจุท ุญุณุจ ุงููุงุฌูุฉ ุงููู ุนูุฏู ๐

๐งญ ุงูุฎุทูุงุช ูููุตูู ุฅูู ุงูู Target Servers ูู ูุงุฌูุชู ุงูุญุงููุฉ
ูู ุงููุงุฆูุฉ ุงูุนููุงุ ุงุถุบุท ุนูู Admin (ุฃูุช ูุนููุง ูููุง โ).

ุจุตู ุนูู ุงูุฌุงูุจ ุงูุฃูุณุฑ ุฃู ูู ุงูููุงุฆู ุงููุฑุนูุฉุ ูุชูุงูู ุญุงุฌุฉ ุฒู:

Environments

ุฃู Environment Configuration

ููุง ุชูุชุญูุงุ ูุชูุงูู ูุงุฆูุฉ ูููุง:

Target Servers

Key Value Maps (KVMs)

Caches

TLS Certificates

ุงุฎุชุฑ ูููุง Target Servers ๐น

ูู ูุง ูููุชุด โTarget Serversโ ูู ุฃู ููุงู ุฏุงุฎู Adminุ ูุฏู ูุนูุงู ูุงุญุฏ ูู ุงูุงุชููู:

ุงููุงุฌูุฉ ุงููู ุนูุฏู ูุฏููุฉ (Apigee Edge Classic) โ ุฃุญูุงููุง ุชููู ููุณููุฉ Tabs ูุฎุชููุฉ.

ุฃู ุฅู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู (gosiuser@gosi.gov.sa) ูุด ููุนููุฉ ูููุตูู ุฅูู ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ.

๐ก ุงูุญู ูู ุงูุญุงูุฉ ุฏู
ุฌุฑุจ ูุงุญุฏุฉ ูู ุงูุทุฑููุชูู:

๐ธ ุงูุทุฑููุฉ ุงูุฃููู (ูู ุฏุงุฎู ุงูู API Proxy ููุณู)
ุงูุชุญ ุงูู Proxy ุงููู ุดุบุงู ุนููู (ุฒู OSP_EstablishmentServiceAPIProxy)

ูู ุชุจููุจ Develop

ูู ุงูุดูุงูุ ุดูู ูู ูู ูุณู ุงุณูู:

Target Servers
ุฃู

TargetEndpoint โ HTTPTargetConnection โ Server
ูููู ุชุถูู ุงูุณูุฑูุฑ ูุจุงุดุฑุฉ ูู ููุง ุจูุชุงุจุฉ ุงูุงุณู ุงููู ุงูููุฑูุถ ูููู ูุณุฌูู ูู ุงูุจูุฆุฉ (ูุซูุงู OSBServer ุฃู OwnerSphereServer).

๐ธ ุงูุทุฑููุฉ ุงูุซุงููุฉ (ูู ุฎูุงู API)
ูู ูุง ุนูุฏูุด ุตูุงุญูุฉ UI ูุงููุฉุ ุงุณุชุฎุฏู Apigee Management API ุจููุณ ุงูุญุณุงุจ:

GET https://api.enterprise.apigee.com/v1/organizations/ameenfea12/environments/intranet/targetservers
๐น ุงุณุชุจุฏู intranet ุจุงุณู ุงูุจูุฆุฉ ุงูุญููููุฉ (ูููู ุชููู ููุชูุจุฉ ูู ุดุงุดุฉ ุงูู Proxy ูู "Environment: intranet").
๐น ุงุณุชุฎุฏู basic auth ูุญุณุงุจ admin ูุซู:

Authorization: Basic base64(gosiuser@gosi.gov.sa:your_password)
ููุทูุนูู JSON ุฒู ุฏู:

[
  {
    "name": "OwnerSphereServer",
    "host": "osb.gosi.gov.sa",
    "port": 443,
    "isEnabled": true
  }
]
ูู ุนุงูุฒ ุฃูููู ุฅุฒุงู ุชุนูู Target Server ุฌุฏูุฏ ูุฏูููุง (ูุนูู ุชุถููู ุจููุณู ุจุฏู ูุง ุชุฏูุฑ ุนููู)ุ
ุฏู ุฃุญูุงููุง ุจูููู ุฃุณูู ูู ุงูุณูุฑูุฑ ูุด ูุชุณุฌู ุฃุตููุง.

You said:
ุทูุจ ูููู ูุฏู ุงูู ุงููู ุนูููุงู ูู ุงููุฑุญูู ุงูุงููู
ChatGPT said:
ุชูุงู ๐ช ุฎูููุง ููุฎุต ุจูุถูุญ ุงููุฑุญูุฉ ุงูุฃููู ุงููู ููุช ุดุบุงู ุนูููุงุ ุฎุทูุฉ ุจุฎุทูุฉุ ูุฏู ุงููู ุฃูุฌุฒุชู ุจุงูุถุจุท ๐

๐งฉ ุงููุฑุญูุฉ ุงูุฃููู: ุฅูุดุงุก ุงูู API Proxy ูู Apigee
๐ฏ ุงููุฏู:
ุฅูู ุชูุดุฆ Proxy API ุฌุฏูุฏุฉ ูู Apigee ุชูุซู ุงูู endpoint:

v1/owner-sphere/b2b/{regNo}/suggestions
ูุฏู ุชููู ูู ุงูุทุจูุฉ ุงููู ุจุชุชุนุงูู ุจูู ุงูู UI ู ุงูู backend (OSB โ AI).

โ ุงููู ุงุชุนูู ูุนูููุง:
1. ูุชุญุช Apigee ูุฏุฎูุช ุนูู ุงูู Dashboard โ API Proxies
ูุดูุช ุงูุจุงุชุฑู ุจุชุงุน ุงูุฃุณูุงุก (ุฒู TR_FraudCaseAPIProxy ู FS_SAMAValidatetIBANV2APIProxy)
ูุนุฑูุช ููุท ุงูุชุณููุฉ ุงููู ุงููุฑูู ุจูุณุชุฎุฏูู.

2. ุฃูุดุฃุช Proxy ุฌุฏูุฏุฉ
ูุณููุชูุง ุนูู ููุณ ุงูููุท:

OSP_EstablishmentServiceAPIProxy
(ุฃู ุงูุงุณู ุงููู ุงุฎุชุฑุชู ููุช ุงูุฅูุดุงุก)

ูุฏู ุจูููู ููู ุงูู Proxy ุงูุฑุฆูุณู ุงููู ุจูุญุชูู ุนูู:

ProxyEndpoint.xml โ ููุซู ูุงุฌูุฉ ุงูู API (ุงููู ุงููุณุชุฎุฏููู ุจููููููุง)

TargetEndpoint.xml โ ููุซู ุงูุณูุฑูุฑ ุงููู ุงูู API ูุชูุตูู ูุนูุงู (backend / OSB)

3. ูุฒูุช ูุณุฎุฉ ูู Proxy ุชุงููุฉ (bundle) ููููุฐุฌ
ุนุดุงู ุชุงุฎุฏ ูููุง ุงูููููุ ูุจุนุฏ ูุฏู ุนููุช Create from bundle
ููู ูุงุฌูุชู ูุดููุฉ ุฅู ุงูุจุงูุฏู ูุงู ูุงุถู ุจุนุฏ ุชุบููุฑ ุงูุงุณู โ ูุฏู ุทุจูุนู ูุฃู Apigee ุจุชุชุญูู ูู ุงููููุงุช ุงูุฏุงุฎููุฉ (structure + manifest).

4. ูุชุญุช ุงูู Develop tab ููู Proxy ุงูุฌุฏูุฏุฉ
ูุดูุช ุฅู ุนูุฏู:

ProxyEndpoint (default)

TargetEndpoint (default)

ุดููุฉ Policies ููุฌูุฏุฉ ุจุงููุนู:

AmeenSecurityCheck

Remove Header Authorization

Verify OAuth v2.0 Access Token

VerifyApiKey

5. ุงุชููููุง ุนู ุงููุฑู ุจูู:
Proxy Endpoints โ ุงููุงุฌูุฉ ุงููู ุงููุณุชุฎุฏู ุจูููููุง (UI โ Apigee)

Target Endpoints โ ุงูููุงู ุงููู Apigee ุชุจุนุชู ูู ูุนูููุง (Apigee โ backend ุฃู OSB ุฃู AI)

6. ุดููุง ุฅู ุฏุงุฎู ูู ูุงุญุฏ ูููู ูู:
PreFlow โ ุงููู ุจูุชููุฐ ูุจู ูุง ุงูุทูุจ ูุชุจุนุช (ุฒู security checks ุฃู header modifications)

PostFlow โ ุงููู ุจูุชููุฐ ุจุนุฏ ูุง ูุฑุฌุน ุงูุฑุฏ (ุฒู logging ุฃู response transformations)

7. ุฑุงุฌุนุช ูุญุชูู ProxyEndpoint.xml ู TargetEndpoint.xml
ูุดููุง ุฅููู ูุณู ูุงุถููู (default template)
ููููุง ุฅู ุงูุฎุทูุฉ ุงูุฌุงูุฉ ูู ุชุนุฏูููู ุจุญูุซ:

Proxy endpoint ูุดูุฑ ุฅูู ุงููุณุงุฑ ุงูุฌุฏูุฏ (/v1/owner-sphere/b2b/{regNo}/suggestions)

Target endpoint ูุดูุฑ ุฅูู ุงูู Target Server ุงููู ูููุตู ููู OSB ุฃู AI

๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูููุฑุญูุฉ ุงูุฃููู:
โ ุนูุฏู ุงูุขู:

Proxy API ุฌุฏูุฏุฉ ูู Apigee ุฌุงูุฒุฉ ููุชุนุฏูู

Policies ุฌุงูุฒุฉ ุชูุฏุฑ ุชุณุชุฎุฏููุง ูู ุงูู flows

ููู ูุงุถุญ ููุนูุงูุฉ ุจูู Proxy ู Target

ุจุงูู ุฅูู ุชุญุฏุฏ ุงูู Target Server ุงููู ูุชูุตูู ูุชุฑุจุทู ุจุงูู Proxy

ุงููุฑุญูุฉ ุงูุฌุงูุฉ ุฅู ุดุงุก ุงููู ๐
๐น ูุฑุจุท ุงูู Proxy ุฏู ุจุงูู Target Server ุงูููุงุณุจ (OSB ุฃู AI)
๐น ููุถุจุท ุงููุณุงุฑุงุช (BasePath ู Target Path)
๐น ููุถูู policies ุงููู ุชุฎุต ุงูุฃูุงู ุฃู ุงูุชุญูููุงุช ุงููุทููุจุฉ

ุชุญุจ ุฃููููู ุฏูููุชู ุจุงูุฎุทูุงุช ุงูููุตูุฉ ูููุฑุญูุฉ ุงูุชุงููุฉุ

You said:
ูุฎุทูุฉ 2: ุชุนูู Developer App + Product

ุฎุด ุน ุงูุฎุทูู ุงูุชุงููู
ChatGPT said:
ุชูุงู ูุง ูุฌู ๐ช ูุจุฏุฃ ุงููุฑุญูุฉ ุงูุชุงููุฉ ุฎุทูุฉ ุจุฎุทูุฉ โ
ูุฏู ุจุนููุงู ๐

๐งฉ ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุฅูุดุงุก API Product ู Developer App
๐ฏ ุงููุฏู ูู ุงููุฑุญูุฉ ุฏู
Apigee ูุงุฒู ุชุฑุจุท ุงูู API Proxy ุงููู ุนูููุงูุง ุจุญุงุฌุฉ ุชุฏููุง ุตูุงุญูุงุช ุงููุตูู.
ูุฏู ุจูุชู ูู ุฎูุงู ุฌุฒุฆูู:

API Product โ ุจุชุญุฏุฏ ุฃู APIs ูุณููุญ ุงููุตูู ูููุง.

Developer App โ ุจุชูุซู ุงูุชุทุจูู ุงููู ููุณุชุฎุฏู ุงูู APIs ุฏู (ุฒู โOwner Sphere UIโ).

๐ฃ ุงูุฎุทูุงุช ุงูุชูุตูููุฉ
๐น ุงูุฎุทูุฉ 1: ุฅูุดุงุก API Product
ูู ุงููุงุฆูุฉ ุงูุนููุงุ ุฑูุญ ุฅูู:
Publish โ API Products

ุงุถุบุท ุนูู + API Product ุฃู Create New Product

ุนุจูู ุงูุจูุงูุงุช ูุฏู ๐

ุงูุญูู	ุงููููุฉ ุงูููุชุฑุญุฉ
Display Name	OwnerSphereSuggestionsProduct
Name	owner-sphere-suggestions-product
Environment	intranet (ุฃู ุงูุจูุฆุฉ ุงููู ูููุง ุงูู proxy)
API Proxies	ุงุฎุชุงุฑ ุงูู Proxy ุงููู ุฃูุดุฃุชูุง (ูุซูุงู OSP_EstablishmentServiceAPIProxy)
Quota	(ุงุฎุชูุงุฑู) ูุซูุงู 1000 request/hour
Access	Public (ูููู ุชุฎูููุง Private ูู ูุชุชุญูู ุจุงูุชุทุจููุงุช ููุท)
ุซู ุงุถุบุท Save โ

๐น ุงูุฎุทูุฉ 2: ุฅูุดุงุก Developer App
ูู ููุณ ูุงุฆูุฉ Publishุ ุฑูุญ ุฅูู:
Developers โ Developer Apps

ุงุถุบุท + Developer App

ุนุจูู ุงูููู ูุฏู:

ุงูุญูู	ุงููููุฉ ุงูููุชุฑุญุฉ
App Name	OwnerSphereApp
Developer	ุงุฎุชุงุฑ developer ููุฌูุฏ (ุฃู ุฃูุดุฆ ูุงุญุฏ ุฌุฏูุฏ ุจุงุณู owner.sphere@gosi.gov.sa)
API Products	ุงุฎุชุงุฑ ุงูููุชุฌ ุงููู ุฃูุดุฃุชู ูู ุงูุฎุทูุฉ ุงููู ูุจููุง (OwnerSphereSuggestionsProduct)
Callback URL	ุฎููู ูุงุถู ุฃู ุญุท URL ุชุฌุฑูุจู (ูุด ููู ุฏูููุชู)
ุงุถุบุท Save โ

๐น ุงูุฎุทูุฉ 3: ุฎูุฏ ุงูู API Key
ุจุนุฏ ูุง ุชุญูุธ ุงูู Appุ ูุชุธูุฑูู Consumer Key ู Consumer Secret
ูุฏู ุงูููุงุชูุญ ุงููู ุงูู UI ุฃู ุฃู ูุธุงู ุฎุงุฑุฌู ููุณุชุฎุฏููุง ุนูุดุงู ูุนูู Authentication ูู ุงูู API Gateway.

๐ก ุจุงุฎุชุตุงุฑ:
โ Product = ุจูุญุฏุฏ ุงูู APIs ุงููุณููุญ ุจููุง

โ App = ุจุชูุซู ุงูุนููู ุงููู ูุณุชุฎุฏููุง

๐ API Key = ุงูููุชุงุญ ุงููู ูุฑุจุท ุจูููู

ูู ุชุญุจ ุฃุดุฑุญูู ุฏูููุชู ุฅุฒุงู ุชุถูู ุงูู Key validation ูู ุงูู Proxy (ูุนูู ุชุฑุจุท ุงูู VerifyApiKey policy ูุนูุงู ุจุงูููุงุชูุญ ุฏู)ุ
ุฏู ุจูููู ุงููุฑุญูุฉ ุงูุซุงูุซุฉ.

You said:
ุนุงูุฒ ุงุฑุญุน ููุฎุทูู ุงูุงููู ูุฉุงุฎูู ุงู ุฑููููุณุช ูุงุฒู ูุนุฏู ุนูู verifyapikey and ameensecurity
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐ ูุฑุฌุน ูุน ุจุนุถ ูููุฑุญูุฉ ุงูุฃููู ููุถูู ุงูุชุนุฏูู ุงููู ูุฎูู ุฃู request ูุงุฒู ูุนุฏูู ุนูู
๐น VerifyApiKey
๐น ู AmeenSecurityCheck

ูุฏู ุจูุชุนูู ุฏุงุฎู ProxyEndpoint.xml (ูู ุงูู PreFlow ุจุชุงุน ุงูู Request).
ุฎูููู ุฃุดุฑุญูู ุจุงูุฎุทูุงุช ููุฏู ูุซุงู ุนููู.

๐ฏ ุงููุฏู
ูู request ููุตู ููู proxy ูุงุฒู:

ูุชุญูู ูู ุงูู API key (authentication)

ูุนุฏู ุนูู policy ุงูุฃูุงู ุงูุฏุงุฎููุฉ AmeenSecurityCheck

๐งฉ ุงูุฎุทูุงุช
๐น 1. ุงูุชุญ ProxyEndpoint.xml
ูู ุงูููู ุงููู ุดููู ูุฏู (ุฃู ูุดุงุจู):

<ProxyEndpoint name="default">
    <Description/>
    <FaultRules/>
    <PreFlow name="PreFlow">
        <Request/>
        <Response/>
    </PreFlow>
    <PostFlow name="PostFlow">
        <Request/>
        <Response/>
    </PostFlow>
    <Flows/>
    <HTTPProxyConnection>
        <BasePath>/v1/owner-sphere/b2b/{regNo}/suggestions</BasePath>
        <VirtualHost>AmeenVH</VirtualHost>
    </HTTPProxyConnection>
    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
๐น 2. ุนุฏูู ุงูู <PreFlow> ุจุญูุซ ูุถู ุงูู Policies
ุฎูููุง ูุฏู:

<PreFlow name="PreFlow">
    <Request>
        <Step>
            <Name>VerifyApiKey</Name>
        </Step>
        <Step>
            <Name>AmeenSecurityCheck</Name>
        </Step>
    </Request>
    <Response/>
</PreFlow>
๐น 3. ุชุฃูุฏ ุฅู ุงูุณูุงุณุงุช ุฏู ููุฌูุฏุฉ ูู ูุฌูุฏ Policies (ูุฏู ุนูุฏู ูุนููุง):
VerifyApiKey.xml

AmeenSecurityCheck.xml

ูู ูุด ููุฌูุฏูู ุฃู ุฃุณูุงุคูู ูุฎุชููุฉ (ุฒู verifyApiKey ุจุญุฑูู ุตุบูุฑุฉ)ุ ูุงุฒู ุงูุงุณู ูู <Name> ูุทุงุจู ุงุณู ููู ุงูู Policy ุจุงูุถุจุท (ุจุฏูู .xml).

๐น 4. ูุซุงู ูุงูู ุจุนุฏ ุงูุชุนุฏูู
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
    <Description>Owner Sphere Suggestions Proxy</Description>
    <FaultRules/>
    <PreFlow name="PreFlow">
        <Request>
            <Step>
                <Name>VerifyApiKey</Name>
            </Step>
            <Step>
                <Name>AmeenSecurityCheck</Name>
            </Step>
        </Request>
        <Response/>
    </PreFlow>
    <PostFlow name="PostFlow">
        <Request/>
        <Response/>
    </PostFlow>
    <Flows/>
    <HTTPProxyConnection>
        <BasePath>/v1/owner-sphere/b2b/{regNo}/suggestions</BasePath>
        <Properties/>
        <VirtualHost>AmeenVH</VirtualHost>
    </HTTPProxyConnection>
    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
โ ุงููุชูุฌุฉ
ุฃู request ูุฏุฎู ุนูู ุงููุณุงุฑ:

/v1/owner-sphere/b2b/{regNo}/suggestions
ููุนุฏู ุจุงูุชุฑุชูุจ ุนูู:

VerifyApiKey โ ูุชุญูู ูู ุงูู API Key ุงููู ุฌุงูุฉ ูู ุงูู Developer App

AmeenSecurityCheck โ ูุฌุฑู ูุญุต ุงูุฃูุงู ุงูุฅุถุงูู

ููู ูุงุญุฏุฉ ูููู ูุดูุชุ Apigee ููุฑุฌุน 403 ุฃู 401 ุญุณุจ ููุน ุงููุดู.

ูู ุชุญุจ ุฃุถูู ููุงู ุงูู RemoveHeaderAuthorization ู Verify OAuth v2.0 ุนุดุงู ูููู ุนูุฏู chain ุฃูุงู ูุงููุฉ ุฒู ุจุงูู ุงูู proxies ุงููู ุนูุฏููุ

You said:
<BasePath\>/v1/owner-sphere/b2b/{regNo}/suggestions</BasePath\>

ุงูุช ุญุงุทุท ุงูุจุงุซ ูุงูู ููู ูุด ุญุงุทุท ุงูุจูุฒ ุจุณ
ChatGPT said:
ุณุคุงู ููุชุงุฒ ุฌุฏูุง ๐ ูุฏู ุจูุฏู ุฅูู ูุงูู ุงููู ุจุชุนููู ูุด ุจุณ ุจุชููุฐ ๐

ุฎูููู ุฃูุถุญูุง ุจุจุณุงุทุฉ:

๐งฉ ุงููุฑู ุจูู BasePath ู full path
ูู Apigeeุ ุงูู <BasePath> ุฏุงุฎู <HTTPProxyConnection> ูุด ุงูููุฑูุถ ูุญุชูู ุนูู ุงููุณุงุฑ ุงููุงูู ุงููู ุจุนุฏู ูุชุบูุฑุงุช ุฒู {regNo}.
ูู ุจูุญุฏุฏ ุงูููุทุฉ ุงูุฃุณุงุณูุฉ ุงููู ุงูู proxy ุฏู ูุชุดุชุบู ุนูููุงุ ูุด ุงููุณุงุฑ ุงููุงูู ููู endpoint.

๐น ูุนูู ุฅูู ุงูููุงู ุฏูุ
ุฎูููู ุฃุฏูู ูุซุงู ุนููู:

ุงูู API ุนูุฏู ุนูู ุงูู UI ูู:

/v1/owner-sphere/b2b/{regNo}/suggestions
ุฏู ุงูู endpoint ุงููุนูู ุงููู ุงููุณุชุฎุฏู ุจูุทูุจูุ
ููู ุฏุงุฎู Apigee ุฅุญูุง ุจููุณููุง ูุฏู ๐

ุงูุนูุตุฑ	ุงููุนูู
BasePath	ุงูุฌุฒุก ุงูุซุงุจุช ุงููู ุนููู ุงูู Proxy ูููุงุ ูุซูุงู /v1/owner-sphere/b2b
Flow ุฃู Route Rule	ุจูุชุนุงูู ูุน ุงูุฌุฒุก ุงููุชุบูุฑ {regNo}/suggestions
๐น ุงูุดูู ุงูุตุญูุญ ูู ุญุงูุชู
ูุจูู ุงูุฃูุถู ุชุฎูููุง ูุฏู:

<HTTPProxyConnection>
    <BasePath>/v1/owner-sphere/b2b</BasePath>
    <VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
ูุจุนุฏูู ุฌูู <Flows> ุฃู ุฏุงุฎู logic ุงูู route ุชุถูู handling ูุจููุฉ ุงููุณุงุฑ:

/{regNo}/suggestions
ูุฏู ูุฎููู ูุฑู ุฃูุชุฑ ูู ูู ุงููุณุชูุจู ูุชุฒูุฏ Endpoints ุชุงููุฉ ุชุญุช ููุณ ุงูู baseุ
ุฒู:

/v1/owner-sphere/b2b/{regNo}/details
/v1/owner-sphere/b2b/{regNo}/owners
๐ก ุฎูุงุตุฉ ุงููุงุนุฏุฉ:
BasePath = ุงูุฌุฒุก ุงูุซุงุจุช
Flows ุฃู Route = ุงูุฌุฒุก ุงููุชุบูุฑ ุฃู ุงูุฎุงุต ุจูู API ูุฑุนูุฉ

ูู ุชุญุจ ุฃุฑูู ุดูู XML ูุงูู ุจุนุฏ ุงูุชุนุฏูู ุฏู (ุจู BasePath ููุท + flow ุฎุงุต ุจุงูู suggestions endpoint)ุ

You said:
Flows ุฃู Route = ุงูุฌุฒุก ุงููุชุบูุฑ ุฃู ุงูุฎุงุต ุจูู API ูุฑุนูุฉ

ุชุชุถุงู ูู ุฏู
ChatGPT said:
ุจุงูุถุจุท โ
ุงูุฌุฒุก ุงููู ููู ุงูู Flows ุฃู Routes ุจูุชุถุงู ุฌูู ProxyEndpoint (ูุด TargetEndpoint).
ูุฏู ูุฃู ุงูู ProxyEndpoint ูู ุงููู ุจูุชุนุงูู ูุน ุงูุฑููููุณุช ุงูุฌุงู ูู ุงููุณุชุฎุฏู (client)ุ
ูุจููุฑุฑ ูููุฌููุง ููู ุจุนุฏ ูุฏู.

ุฎูููู ุฃุดุฑุญูุง ุนููู ูุจุงูููุฏ ๐

๐ ููุงู ุฅุถุงูุฉ ุงูู Flows
ุงูููู ุงููู ุงุณูู ูุซูุงู:

apiproxy/proxies/default.xml
ุฌูู ุงูููู ุฏู ูุชูุงูู ุญุงุฌุฉ ุฒู ูุฏู:

<ProxyEndpoint name="default">
    <Description/>
    <PreFlow name="PreFlow">
        <Request>
            <!-- ููุง ูููู ุชุญุท Policies ุฒู VerifyAPIKey -->
        </Request>
        <Response/>
    </PreFlow>

    <!-- ููุง ุจุชุจุฏุฃ ุชุถูู ุงู Flows -->
    <Flows>
        <Flow name="GetSuggestions">
            <Condition>(proxy.pathsuffix MatchesPath "/{regNo}/suggestions") and (request.verb = "GET")</Condition>
            <Request>
                <!-- ูููู ุชุถูู ููุง Policies ุฎุงุตุฉ ุจุงู endpoint ุฏู -->
            </Request>
            <Response/>
        </Flow>
    </Flows>

    <PostFlow name="PostFlow">
        <Request/>
        <Response/>
    </PostFlow>

    <HTTPProxyConnection>
        <BasePath>/v1/owner-sphere/b2b</BasePath>
        <VirtualHost>AmeenVH</VirtualHost>
    </HTTPProxyConnection>

    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
โ๏ธ ุงูุดุฑุญ ุงูุณุฑูุน:
<BasePath> = ุงูุฌุฒุก ุงูุซุงุจุช ุฒู ูุง ุงุชูููุง (/v1/owner-sphere/b2b)

<Flows> = ูููุง ูู endpoint ูุฑุนูุ ุฒู /suggestions ุฃู /details

<PreFlow> = ุจูุชููุฐ ูุจู ุฃู flow (ุชูุฏุฑ ุชุญุท ููู ุณูุงุณุงุช ุนุงูุฉ ุฒู VerifyAPIKey ู AmeenSecurityCheck)

<PostFlow> = ุจูุชููุฐ ุจุนุฏ ูุง ูุฎูุต ุงูู flow (ูููู ุชุญุท ููู Logging ุฃู Response Transformation)

ูู ุชุญุจ ุฃุถูููู ุฏูููุชู ูุซุงู ูุงูู ุนููู ุจุงูู VerifyAPIKey ู AmeenSecurityCheck ูุญุทูุทูู ูู ุงูู PreFlowุ

You said:
proxy end point default.xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request>
<Step>
<Name>VerifyAPIKey</Name>
</Step>
<Step>
<Name>AmeenSecurityCheck</Name>
</Step>
</Request>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows/>
<HTTPProxyConnection>
<BasePath>/v1/owner-sphere/b2b</BasePath>
<Properties/>
<VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
<RouteRule name="default">
<TargetEndpoint>default</TargetEndpoint>
</RouteRule>
</ProxyEndpoint>
 
target endpoint default.xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TargetEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request>
<Step>
<Name>VerifyAPIKey</Name>
</Step>
<Step>
<Name>AmeenSecurityCheck</Name>
</Step>
</Request>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows/>
<HTTPTargetConnection>
<LoadBalancer>
<Server name="APPServer"/>
</LoadBalancer>
<Path>/owner-sphere/b2b</Path>
</HTTPTargetConnection>
</TargetEndpoint>


ุฏู ุดูู ุงููุงูููู ุนูุฏู ุฏูููุช,, ูุฏู ุงูุฏููุง ุชูุงู ููุง ุงููุุ
ChatGPT said:
ุฌููู ุฌุฏูุง ุฅูู ูุตูุช ูููุฑุญูุฉ ุฏู ๐
ููู ูู ุนูุฏู ุชูุตููุชูู ูููุชูู ุฌุฏูุง ูุงุฒู ูุนุฏููู ุนูุดุงู ุงูุจุฑููุณู ูุดุชุบู ุตุญ 100ูช.

ุฎูููู ุฃูุถุญูู ูุงุญุฏุฉ ูุงุญุฏุฉ ๐

โ ุฃููุงู: VerifyAPIKey ู AmeenSecurityCheck ููุงููู ุงูุตุญูุญ
ุงูุณูุงุณุงุช ุฏู ูุนูููุฉ ุนูุดุงู ุชุญูู ูู ุงูุฑููููุณุช ุงููู ุฌุงู ูู ุงูููุงููุช (ูุนูู ูุจู ูุง ููุตู ููุชุงุฑุฌุช).

ุจุงูุชุงูู ูุงุฒู ุชููู ููุท ูู ProxyEndpoint.

ูุฌูุฏูู ุฏุงุฎู TargetEndpoint ุบูุท โ ูุฃู ุงูุชุงุฑุฌุช ูู ุงููู ุจูููู ุงูุณูุฑูุฑ ุงูุฏุงุฎูู ุจุนุฏ ุงูุชุญูู.

๐ ูุนูู:

ุฎููู ุญุงุทุท ุงูู steps ุฏูู ููุง โ:

<ProxyEndpoint name="default">
    ...
    <PreFlow name="PreFlow">
        <Request>
            <Step>
                <Name>VerifyAPIKey</Name>
            </Step>
            <Step>
                <Name>AmeenSecurityCheck</Name>
            </Step>
        </Request>
        <Response/>
    </PreFlow>
    ...
</ProxyEndpoint>
ูุดูููู ูู ุงูู TargetEndpoint โ.

โ ุซุงูููุง: ุงูุชุงุฑุฌุช ููุณู
ุงูู TargetEndpoint ุงูููุฑูุถ ุจุณ ูุญุฏุฏ ุงูุณูุฑูุฑ ุงูุฏุงุฎูู ุงููู ููุชุจุนุชูู ุงูุฑููููุณุช ุจุนุฏ ูุง ูุชุฃูุฏ ูู ุงูุณููููุฑูุชู.

ูุนูู ูููู ุดููู ูุฏู:

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TargetEndpoint name="default">
    <Description/>
    <FaultRules/>
    <PreFlow name="PreFlow">
        <Request/>
        <Response/>
    </PreFlow>
    <PostFlow name="PostFlow">
        <Request/>
        <Response/>
    </PostFlow>
    <Flows/>
    <HTTPTargetConnection>
        <LoadBalancer>
            <Server name="APPServer"/>
        </LoadBalancer>
        <Path>/owner-sphere/b2b</Path>
    </HTTPTargetConnection>
</TargetEndpoint>
โ๏ธ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
โ ูู ุงูุฑููููุณุชุงุช ูุชุนุฏู ุนูู:

VerifyAPIKey

AmeenSecurityCheck

โ ุจุนุฏูู ุชุชูุฌู ููุณูุฑูุฑ ุงูุฏุงุฎูู (APPServer).

โ ูุนูู ุญูุงูุฉ ุนูู ูุณุชูู ุงูุจุฑููุณู ุจุงููุงูู.

โ ูุงูููุนุด ูุญุท ุงูู policies ุฏู ูู ุงูุชุงุฑุฌุช ูุฃู ุฏู ุฌุฒุก ุฏุงุฎูู ูู ุงูููู.

ุชุญุจ ุฃูููู ุจุนุฏ ูุฏู ุฅุฒุงู ุชุชุฃูุฏ ูู ุฅู ุงูุณูุงุณุงุช ุฏู ุจุชุชููุฐ ูุนูุงู ููุง ุชุจุนุช requestุ

You said:
hkh p,ajil lk hgjhv[j, ;]i jlhl ;g ph[i td hgo',i hgh,gd??
ChatGPT said:
ุฃููู ุจุงูุถุจุท ๐ช
ุงููู ูุญุชุงุฌ ุชุนููู ุฏูููุชู ูู ุงูุฎุทูุฉ ุงูุฃููู ูู ุงูุชุนุฏูู ุงููู ูููุงู:

ุงูุฎุทูุฉ ุงูุฃููู (ุงูุชูุธูู ูุงูุชุธุจูุท):
โ ุงูุชุญ ููู ProxyEndpoint (default.xml)
ุฎููู ููู ุงูู policies ุฏู ูู ุงูู PreFlow / Request ุฒู ูุฏู:

<PreFlow name="PreFlow">
    <Request>
        <Step>
            <Name>VerifyAPIKey</Name>
        </Step>
        <Step>
            <Name>AmeenSecurityCheck</Name>
        </Step>
    </Request>
    <Response/>
</PreFlow>
โ ุงูุชุญ ููู TargetEndpoint (default.xml)
ุดูู ููู ุงูุฎุทูุชูู ุฏูู (VerifyAPIKey ูAmeenSecurityCheck).
ุฎููู ูุฏู:

<PreFlow name="PreFlow">
    <Request/>
    <Response/>
</PreFlow>
โ ุชุฃูุฏ ุฅู ุงูู RouteRule ูู ุงูู ProxyEndpoint ุจูุฑุจุท ูุนูุงู ุจุงูุชุงุฑุฌุช:

<RouteRule name="default">
    <TargetEndpoint>default</TargetEndpoint>
</RouteRule>
ุจุนุฏ ูุฏู ููุฑูุญ ููุฎุทูุฉ ุงูุชุงููุฉ ๐
ููู ูุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ ุงูุฏุงุฎูู (APPServer) โ ูุนูู ูุงุฒู ูุฑุงุฌุน ุชุนุฑููู ูู ูุณู "Target Servers" ุฏุงุฎู Apigee.

ุชุญุจ ุฃูููู ุจุงูุธุจุท ุฅุฒุงู ุชูุชุญ ุตูุญุฉ ุงูู Target Servers ูุชุดูู ุงูุณูุฑูุฑุงุช ุงููุณุฌูุฉุ

You said:
ุชุนุงูู ูุจุฏุง ุจูุง ูู ุงูุฎุทูู ุงูุชุงููู
ChatGPT said:
ุชูุงู โ ูุจุฏุฃ ุจุงูุฎุทูุฉ ุงูุชุงููุฉ ุฎุทูุฉ ุจุฎุทูุฉ ูุจุฏูู ุชุนููุฏ ๐

๐งฉ ุงูุฎุทูุฉ ุงูุชุงููุฉ:
"Create a Developer App for the Owner Sphere and create a Product for the new proxy"
ุงููุฏู ูู ุงูุฎุทูุฉ ุฏู ุฅูู:

ุชูุชุญ ุงููุตูู ููู API ุงููู ุงูุช ุนููุชู ุนู ุทุฑูู API Product + Developer App
ูุฏู ุทุฑููุฉ Apigee ูู ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ุงุณุชููุงู ุงูู APIs.

๐ช ุงูุฌุฒุก ุงูุฃูู: ุฅูุดุงุก API Product
ุงุฏุฎู ุนูู Apigee Dashboard.

ูู ุงูุดุฑูุท ุงูุฌุงูุจู ุงุฎุชุฑ:
Publish โ API Products

ุงุถุบุท ุนูู ุฒุฑ + API Product ุฃู Create new API Product

ุงููุง ุงูุจูุงูุงุช ูุฏู:

Name: OwnerSphereProduct

Display Name: Owner Sphere Product

Description: (ุงุฎุชูุงุฑูุ ูุซููุง)
Product that exposes Owner Sphere B2B API for AI integration.

Environments: ุงุฎุชุฑ ุงูุจูุฆุฉ ุงููู ุงูุช ุดุบุงู ูููุง (ุฒู test ุฃู prod)

API Proxies: ุงุฎุชุงุฑ ูููุง ุงูู proxy ุงููู ุงูุช ูุณู ุนุงููู (ุฒู OSP_EstablishmentServiceAPIProxy)

Operations: ุณูุจูุง ููุชูุญุฉ (ุฃู ุญุฏุฏ ุงููุณุงุฑ /v1/owner-sphere/b2b/* ูู ุนุงูุฒ ุชุญูู ุงููุตูู)

Access: Public (ุฃู Private ูู ูุชุฑุจุทู ุจุชุทุจููุงุช ูุนููุฉ)

Quota / Rate Limit: ุณูุจูุง ุฏูููุชู ูุงุถูุฉ

ุงุถุบุท Save โ

๐งฉ ุงูุฌุฒุก ุงูุซุงูู: ุฅูุดุงุก Developer App
ูู ุงูุดุฑูุท ุงูุฌุงูุจู ูู Apigee โ ุงุฎุชุฑ Publish โ Apps

ุงุถุบุท + App

ุงููุง ุงูุญููู ูุฏู:

Name: OwnerSphereApp

Developer: ุงุฎุชุงุฑ Developer ููุฌูุฏ (ุฃู ุงุนูู ูุงุญุฏ ุฌุฏูุฏ ุจุงุณู owner.sphere@gosi.gov.sa)

API Products: ุงุฎุชุงุฑ ุงูู Product ุงููู ูุณู ุนููุชู OwnerSphereProduct

Callback URL: ุณูุจูุง ูุงุถูุฉ (ูุด ุถุฑูุฑู ุฏูููุชู)

Notes: โApp for Owner Sphere B2B AI communication.โ

ุงุถุบุท Create โ

ุจุนุฏ ุงูุญูุธุ ููุชููุฏูู API Key ุชููุงุฆููุง ๐
ูุฏู ุงููู ุจูุชุญูู ููู ุงูู VerifyAPIKey policy ุงููู ุญุทููุงู ูู ุงูู PreFlow.

๐ ุงููุชูุฌุฉ
ุงููู ุญุตู ุฏูููุชู:

ุงูู Proxy ุจุชุงุนู ุจูู ูุฑุจูุท ุจู API Product.

ุงูู Product ูุฑุจูุท ุจู Developer App.

ุงูู App ูุนุงูุง API Key โ ูุงุฒู ุงูุฑููููุณุช ูุจุนุชู ุนุดุงู ูุนุฏู ูู VerifyAPIKey โ

ุชุญุจ ุฏูููุชู ุฃุดุฑุญูู ุฅุฒุงู ุชุฎุชุจุฑ ุงูู API ุจุนุฏ ูุง ุฎูุตูุง ุงูุฎุทูุฉ ุฏู ุจุงุณุชุฎุฏุงู ุงูู API Keyุ

You said:

Dashboard
APIs
Publish
Analytics
Admin
Help
gosiuser@gosi.gov.sa

Dashboard /
Products /
OwnerSphereSuggestionsProduct
Organization 
ameenfea12



OwnerSphereSuggestionsProduct

Products give developers access to your APIs. Learn moreDeleteEdit

Product Details

Name

OwnerSphereSuggestionsProduct

Display Name

OwnerSphereSuggestionsProduct

Description



Environment

intranet private public

Access

Public

Key Approval Type

Automatic

Quota

                                     Select...                                     minute                                     hour                                     day                                     month                                 

Allowed OAuth Scopes



Resources



Paths

Resource Path

API Proxies

API Proxy

OSP_EstablishmentServiceAPIProxy

Istio Services

Service Name

Custom

Attributes

Name

Value

Developer Apps

Search



0-0 of 0  

App

Developer

App Family

Key

Registered































































































































































































ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00
ChatGPT said:
ุชูุงู ุฌุฏูุง โ
ูุฏู ุฃูุช ุฎูุตุช ุฃูู ุฌุฒุก ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ โ ุนููุช ุงูู API Product ุจูุฌุงุญ ๐

ุฏูููุชู ูููู ุงูุฌุฒุก ุงูุชุงูู ููู ุฅูุดุงุก ุงูู Developer App ูุฑุจุทู ุจุงูู Product ุฏูุ ุจุญูุซ ุชูุฏุฑ ุชูููุฏ API Key ูุชุณุชุฎุฏููุง ูุน ุงูุฑููููุณุชุงุช.

โ๏ธ ุงูุฎุทูุฉ 2 (ุงูุฌุฒุก ุงูุซุงูู): ุฅูุดุงุก Developer App
ุงุชุจุน ุงูุฎุทูุงุช ุฏู ุจุงูุถุจุท ุฏุงุฎู Apigee ๐

ูู ุงูู Apigee Dashboard
ุงุฎุชุงุฑ ูู ุงูุดุฑูุท ุงูุฌุงูุจู:
Publish โ Apps

ุงุถุบุท ุนูู ุงูุฒุฑ + App (ุฃู "Create App" ุญุณุจ ุงููุงุฌูุฉ ุนูุฏู)

ูุชูุชุญ ุดุงุดุฉ ูููุง ุญูููุ ุงููุงูุง ูุฏู:

Name: OwnerSphereSuggestionsApp

Display Name: Owner Sphere Suggestions App

Developer:
ูู ุนูุฏู Developer ุฌุงูุฒ (ุฒู gosiuser@gosi.gov.sa) ุงุฎุชุงุฑู.
ูู ูุด ูุงูู ุฃู Developerุ ุงุถุบุท ุนูู "Create new Developer" ูุงููู:

Email: ownersphere@gosi.gov.sa

First Name: Owner

Last Name: Sphere

API Products:
ุงุฎุชุงุฑ ูููุง ุงูู Product ุงููู ุนููุชู ูู ุดููุฉ
โ OwnerSphereSuggestionsProduct

Callback URL: (ุณูุจูุง ูุงุถูุฉ)

Notes: (ุงุฎุชูุงุฑู ูุซููุง "App for Owner Sphere AI API Testing")

ุงุถุบุท Create / Save โ

๐ฏ ุจุนุฏ ูุง ุชุฎูุต
ุจุนุฏ ุฅูุดุงุก ุงูู Appุ ูุชูุงูู ุฌูููุง ุฌุฏูู ููู API Key (Client ID).
ุฎุฏ ุงูู Key ุฏู โ ูุฃูู ูู ุงููู ูุงุฒู ูุชุจุนุช ูู ุงูููุฏุฑ ุจุชุงุน ูู API request ูุฏู:

x-api-key: YOUR_API_KEY_HERE
ูุฏู ุจุงูุถุจุท ุงููู ููุชุญูู ููู ุงูู VerifyAPIKey policy ุงููู ุงูุช ุญุงุทุทูุง ูู ุงูู PreFlow ๐

ูู ุนุงูุฒูู ุฃุดุฑุญูู ุฏูููุชู ุฅุฒุงู ุชุฎุชุจุฑ ุงูู API ูุชุชุงูุฏ ุฅู ุงูู VerifyAPIKey policy ุดุบุงูุฉ ูุนูุงู (ุจุงุณุชุฎุฏุงู Postman ุฃู curl)ุ

You said:

Dashboard
APIs
Publish
Analytics
Admin
Help
gosiuser@gosi.gov.sa

Dashboard /
Developer Apps /
OwnerSphereApp
Organization 
ameenfea12



OwnerSphereApp

Developer App Details

Name

OwnerSphereApp

Display Name



Registered

Oct 12 2025 10:44 PM

Developer

Moayad Alsurayyi (MALSURAYYI@GOSI.GOV.SA)

App Status

Approved   Revoke

Callback URL



A callback URL is required only for 3-legged OAuth.

Notes



Credentials

Issued

Expiry

Consumer Key

Consumer Secret

Status

Actions

Oct 12 2025 10:44 PM

10 days ago

Never

 Show

 Show

Approved

Revoke



Product







EstablishmentAPI

Approved

Revoke Remove



OwnerSphereSuggestionsProduct

Approved

Revoke Remove



 Product

Credential

Custom Attributes

Name

Value

Actions





Delete





Delete

Cancel Save

ยฉ 2025 Apigee Corp. All rights reserved. Version 4.19.06.00

ุงูุง ูููุช ูุงุญุฏ ูุนููู ุจุงููุนู ูุถูุช ููู ุงูุจุฑูุฏูุช ุจุชุงุนู,, ูุฏู ุชูุงูุุ
ChatGPT said:
ููุชููุงุฒ ุฌุฏูุง โ
ูุฏู ุงูุช ูุนูููุง ุฎูุตุช ุงูุฎุทูุฉ ุงูุชุงููุฉ ุจุงููุงูู ๐๐

ูุนูู ุฏูููุชู ุนูุฏู:

โ API Proxy ูุนููู (OSP_EstablishmentServiceAPIProxy)

ูููู ุณูุงุณุงุช (Policies):

VerifyAPIKey

AmeenSecurityCheck

ุดุบุงูุฉ ุนูู ุงูู ProxyEndpoint ููุท.

โ API Product ุงุณูู OwnerSphereSuggestionsProduct

ูุฑุจูุท ุจุงูู Proxy ุงููู ููู.

โ Developer App ุงุณูู OwnerSphereApp

ููุฑุจูุท ุจุงูู Product ุจุชุงุนู.

ูููู Consumer Key (API Key) ุงููู ูุชุณุชุฎุฏููุง ูู ุงุฎุชุจุงุฑู.

๐ ุงููุฑุญูุฉ ุงูุฌุงูุฉ (ุงูุฎุทูุฉ ุงูุซุงูุซุฉ)
ูู ุฅูู ุชูุดุฆ API (Request / Response) ุนูู ูุณุชูู ุงูู Backend Owner Sphere ูุชุฎููู ููุงุฏู AI Service.
ุจูุนูู:

ุชุนูู Proxy Class ุฌุฏูุฏุฉ ูู ุงูู OWS backend.

ุงูู Proxy ุฏู ุชุจุนุช Request ููู AI endpoint.

ูุชุชุนุงูู ูุน Response ูู ุงูู AI.

ููู ูุจู ูุง ูุฏุฎู ูู ุฏูุ ุฎูููู ุฃุชุฃูุฏ ูุนุงู:
ูู ุงูู API proxy ุงููู ุงูุช ุนููุชู (OSP_EstablishmentServiceAPIProxy) ุงุชูุดุฑ (Deployed) ูู environment intranet ุฃู privateุ
ููุง ูุณูุ

You said:
ุนูุฏู ุณูุงู, ุงูุง ูุถูุชุด ุงููุณุงุฑ ุงููุงูู ูุญุฏ ุฏูููุช, ุงูููุฑูุถ ุงุถููู ููู
ChatGPT said:
ุณุคุงู ููุชุงุฒ ุฌุฏูุง ๐ ูุฏู ูู ููุงูู ุจุงูุธุจุท โ ูุฃู ุงููุณุงุฑ (Path) ูู ุงููู ุจูุญุฏุฏ ุงุฒุงู ุงูุฑููููุณุช ูููุตู ูู ุงูู UI ูุญุฏ ุงูุณูุฑูุฑ ุงููู ูุฑุงู.
ุฎูููู ุฃุดุฑุญูู ุจุงูุชูุตูู ุงูุจุณูุท:

๐ฏ ุฃูููุง: ูุนูู ุฅูู โุงููุณุงุฑ ุงููุงููโุ
ุงููุณุงุฑ ุงููุงูู ุงูููุตูุฏ ูู ุงูู endpoint ุงููู ุงูููุฑูุถ ุงูู API ุชุฑุฏ ุนูููุ ูุซููุง:

/v1/owner-sphere/b2b/{regNo}/suggestions
ูุฏู ูุงุฒู ูุธูุฑ ูู ุงุซููู ุฃูุงูู ุฑุฆูุณููู ุฏุงุฎู ุงูู proxy files:

๐งฉ 1. ูู ููู ุงูู ProxyEndpoint (ุงููู ูู proxy-endpoint/default.xml)
ุฏู ุงูุฌุฒุก ุงููู ุจูุชุนุงูู ูุน ุงูู client (ุงูู UI ุฃู ุฃู ูุณุชููู ููู API).
ููุง ุจูุญุท BasePath ุงููู ุงูู API ูุชุชุนุงูู ุนููู ุนูููุง ูู ุฎูุงู Apigee.

โ ูุซุงู ุตุญ:
<HTTPProxyConnection>
    <BasePath>/v1/owner-sphere/b2b</BasePath>
    <Properties/>
    <VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
ูู ุงูู UI ููุจุนุช requests ุจุงูุดูู ุฏู:

/v1/owner-sphere/b2b/{regNo}/suggestions
ูุจูู ูุฏู ุชูุงู โ ูุฃู Apigee ูููููู ุงููุณุงุฑ /suggestions ุจูุงุกู ุนูู ุงูู flows ุฃู rules ุงููู ุฌูู.

๐งฉ 2. ูู ููู ุงูู TargetEndpoint (ุงููู ูู target-endpoint/default.xml)
ุฏู ุงูุฌุฒุก ุงููู ุจูุฑุจุท Apigee ุจุงูุณูุฑูุฑ ุงูุฏุงุฎูู (OWS backend ุฃู AI service).
ููุง ุจูุญุฏุฏ ุงูู path ุงูุฏุงุฎูู ุงููู Apigee ูููุงุฏูู ุนูู ุงูู target server.

โ ูุซุงู ุตุญ:
<HTTPTargetConnection>
    <LoadBalancer>
        <Server name="APPServer"/>
    </LoadBalancer>
    <Path>/owner-sphere/b2b/{regNo}/suggestions</Path>
</HTTPTargetConnection>
ููุง ุงููุณุงุฑ ูุงุฒู ูููู ูุงูู ููุงุถุญ โ ูุฃูู ุฏู ุงููู ููุชุฑุณู ูุนูููุง ููู backend.

๐ง ููุฎุต ุณุฑูุน
ุงูููู	ุงูุบุฑุถ	ุงููุณุงุฑ ุงููู ุชุญุทู
ProxyEndpoint	ุงูุฌุฒุก ุงููู ุจูุณุชูุจู ุงูู request ูู ุงูู client	/v1/owner-sphere/b2b
TargetEndpoint	ุงูุฌุฒุก ุงููู ุจููุงุฏู ุงูู backend ุงูุญูููู	/owner-sphere/b2b/{regNo}/suggestions
ูู ุชุญุจ ุฃูุฑูู ุดูู ููุงุฆู ูููุงูููู ุจุนุฏ ุงูุชุนุฏูู ุจุญูุซ ูุจููุง ูุทุงุจููู ูููุทููุจ ูู ุงูุชุงุณู ุจุชุงุนูุ

You said:
ุทุจ ุงูุง ูุถูุชุด ุงููููู ุจุฑุถูุุ
ChatGPT said:
๐ฅ ููุชุงุฒ ุฅูู ุฎุฏุช ุจุงูู ูู ุงูููุทุฉ ุฏู!
ูุนูุงู โ ูุณู ูุชููููุงุด ุนู ุงูู Flowsุ ูุฏู ุฎุทูุฉ ูููุฉ ุฌุฏูุง ุนูุดุงู ุงูู Proxy ูุนุฑู ููุดู ุงูุฑููููุณุช ูู ูุณุงุฑ ูุนูู (ุฒู /suggestions ูุซููุง) ุจุฏู ูุง ููุถู ุนุงู (generic) ูู ุบูุฑ ุฃู route ูุญุฏุฏ.

ุฎูููู ุฃุดุฑุญูุง ูุงุญุฏุฉ ูุงุญุฏุฉุ ูุจุนุฏูุง ุฃุฏูู ุงูุดูู ุงูููุงุฆู ูุงูู ๐

๐งฉ ูุนูู ุฅูู Flow ูู Apigeeุ
ุงูู Flow ูู ุจุจุณุงุทุฉ "ูุงููู" ุฃู "ูุณุงุฑ ุชูููุฐ" ุฌูุง ุงูู Proxy ุจูููู:

ููุง ุงูุฑููููุณุช ููุฌู ุนูู path ูุนููุ ูููุฐ ุงูุฎุทูุงุช ุฏู (Policies ูุนููุฉุ Target ูุนูู... ุฅูุฎ).

ูุนูู ูู ุนูุฏู ุฃูุชุฑ ูู endpointุ ูู ูุงุญุฏ ูู Flow ุฎุงุต ุจูู.

๐งฑ ุชุฑููุจ ุงูู Flow
ุจุชุชุญุท ุฌูุง ููู ุงูู ProxyEndpoint (default.xml)
ูุจุชููู ุจุงูุดูู ุฏู:

<Flows>
    <Flow name="GetSuggestions">
        <Description>Handles AI establishment suggestions</Description>
        <Request>
            <Step>
                <Name>VerifyAPIKey</Name>
            </Step>
            <Step>
                <Name>AmeenSecurityCheck</Name>
            </Step>
        </Request>
        <Response/>
        <Condition>(proxy.pathsuffix MatchesPath "/{regNo}/suggestions") and (request.verb = "GET")</Condition>
    </Flow>
</Flows>
๐ ุดุฑุญ ุงูุณุทูุฑ
<Flow name="GetSuggestions">
ุงุณู ุงููููุ ูุฌุฑุฏ ุงุณู ููุทูู ูุณุงุนุฏู ุชูููุฒูุง.

<Condition>
ุงูุดุฑุท ุงููู ูุญุฏุฏ ุงูุชู ุงูููู ุฏู ุชุดุชุบู.
ููุง ุจูููู: ูู ุงูู path ุงูุชูู ุจู /suggestions ูุงูู method GET โ ุงุดุชุบู.

<Request>
ุฌูุงู ุจุชุญุท ุงูู Policies ุงููู ุนุงูุฒูุง ุชุชููุฐ ูุจู ูุง ุชุจุนุช ุงูุฑููููุณุช ููุณูุฑูุฑ.

โ๏ธ ููู ูุถูููุงุ
ุชุญุทูุง ุฏุงุฎู ููู proxy-endpoint/default.xml
ูู ุงูููุงู ุฏู ุจุงูุถุจุท ๐

<ProxyEndpoint name="default">
    <Description/>
    <FaultRules/>
    <PreFlow name="PreFlow">...</PreFlow>
    <PostFlow name="PostFlow">...</PostFlow>

    <!-- ููุง -->
    <Flows>
        <!-- Flow ููู API endpoint -->
    </Flows>

    <HTTPProxyConnection>...</HTTPProxyConnection>
    <RouteRule name="default">
        <TargetEndpoint>default</TargetEndpoint>
    </RouteRule>
</ProxyEndpoint>
ูู ุชุญุจ ุฃุนููู ูุณุฎุฉ ูุงููุฉ ูุฌุงูุฒุฉ ูู proxy-endpoint/default.xml
ูููุง ูู ุญุงุฌุฉ (PreFlow + Flow + Route + BasePath) ูุชุธุจุทุฉ ุจุงูุธุจุท ูุชุงุณูู /v1/owner-sphere/b2b/{regNo}/suggestionsุ

You said:
ุงูุง ูุด ูุงูู ุญุงุฌู, ูุญุฏู ูุญุฏู ุนุดุงู ุงูุฏุฑ ุงูููู
ChatGPT said:
ุชูุงู โ ุฎุทูุฉ ุจุฎุทูุฉ ูุจุณุงุทุฉ ูุฏูุ ูุจุฏุฃ ุจุงูุฃุณุงุณูุงุช ูุจุตุบูุฑ: ุฃูู ุญุงุฌุฉ ููุนูููุง ุฏูููุชู ูู ุฅุถุงูุฉ Flow ูุงุญุฏ ุฎุงุต ุจุงูู suggestions ุฏุงุฎู ููู ProxyEndpoint/default.xml. ููุง ูุถูู ุงูู Flow ุฏูุ ุงูู Proxy ููุนุฑู ุฅูุชู ููููุฐ ุงูููุฏ ุงูุฎุงุต ุจุงูููุทุฉ ุฏู (ูุซูุงู ููุง ูุฌู ุทูุจ GET ุนูู /.../{regNo}/suggestions).

ูููุดู ุนูู ูฃ ุญุงุฌุงุช ุจุณูุทุฉ ุงูุขู:

ุฃุนุทูู ุงูู XML ุงููู ุชูุณุฎู.

ุฃูููู ููู ุชูุตูู ุจุงูุธุจุท.

ุฃุดุฑุญูู ุฅุฒุงู ุชุฎุชุจุฑู ุจุณุฑุนุฉ.

1) ุงูููุฏ ุงููู ุงูุณุฎู (Flow ูุงุญุฏ ููุท)
ุงูุณุฎ ุงูุจููู ุฏู ุญุฑูููุง:

<Flows>
  <Flow name="GetSuggestions">
    <Description>Handle suggestions for an establishment</Description>

    <!-- Steps that will run for requests to this endpoint -->
    <Request>
      <!-- ูุฐู ุงูุณูุงุณุงุช ุนุงูุฉ ููู ูููู ุชุญุฏูุฏ ุณูุงุณุงุช ุฎุงุตุฉ ููุง ุฅู ุงุญุชุฌุช -->
      <Step>
        <Name>VerifyAPIKey</Name>
      </Step>
      <Step>
        <Name>AmeenSecurityCheck</Name>
      </Step>
    </Request>

    <Response/>
    <!-- ุดุฑุท ุชูุนูู ุงูููู: ุงููุณุงุฑ ุงูููุงุฆู ูุทุงุจู /{regNo}/suggestions ู method = GET -->
    <Condition>(proxy.pathsuffix MatchesPath "/{regNo}/suggestions") and (request.verb = "GET")</Condition>
  </Flow>
</Flows>
2) ููู ุชูุตูู ุจุงูุถุจุท
ุงูุชุญ ุงูููู apiproxy/proxies/default.xml (ุฃู ูู ูุงุฌูุฉ Apigee: Develop โ Proxy Endpoints โ default).

ุงุจุญุซ ุงูููุงู ุงููู ููู ุงูุฃูุณุงู: PreFlow, PostFlowุ ูHTTPProxyConnection.

ูุจู <HTTPProxyConnection> ุฃู ุจุนุฏ <PostFlow> ุงูุตุบูุฑุ ุงูุตู ุงูุจููู ุงููู ููู. ุงููุชูุฌุฉ ุชููู ุดุจููุฉ ุจูุฐุง ุงูุชุฑุชูุจ:

<PreFlow name="PreFlow"> ... </PreFlow>

<PostFlow name="PostFlow"> ... </PostFlow>

<!-- ููุง ุงูุตู ุงูุจููู -->
<Flows>
  ... (Flow ุงููู ููู) ...
</Flows>

<HTTPProxyConnection>
  <BasePath>/v1/owner-sphere/b2b</BasePath>
  <VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
ููุงุญุธุฉ: ุจูุง ุฅูู ูุนูุงู ุญุงุทุท VerifyAPIKey ูAmeenSecurityCheck ูู ุงูู PreFlow ุงูุนุงูุ ูููู ุชูุชูู ุจูุฌูุฏูู ููุงู ูุชูุบู ุชูุฑุงุฑูู ุฏุงุฎู ุงูู Flow. ููู ูุฌูุฏูู ุฏุงุฎู ุงูู Flow ูุถูู ุฃููู ููุทุจููุง ุฎุตูุตูุง ุนูู ูุฐุง ุงููุณุงุฑ โ ูุชุฑูู ููู. (ูู ูุด ุนุงูุฒ ุชูุฑุงุฑุ ุงุญุฐู ุงูู Steps ูู ุฏุงุฎู ุงูู Flow).

3) ุงุญูุธุ ุงูุดุฑุ ูุงุฎุชุจุฑ
ุงุถุบุท Save ูู ุงูู Proxy editor.

ุงุฐูุจ ูู Overview ูุงุถุบุท Deploy โ ุงุฎุชุงุฑ environment intranet.

ุจุนุฏูุง ุงุฎุชุจุฑ ุจุงูู curl ุฃู Postman.

ูุซุงู ุงุฎุชุจุงุฑ ุจุณูุท (ุจุงุณุชุฎุฏุงู curl)
ุงุณุชุจุฏู YOUR_API_KEY ุจุงูู Consumer Key ุงููู ูู ุงูู Developer Appุ ู{regNo} ุจุฑูู ุญูููู ููุชุฌุฑุจุฉุ ูAPIGEE_HOST ุจุงูุฏูููู ุจุชุงุนูู (ูุซุงู ุชูุฑูุจู):

curl -i -X GET "https://ameenfea12.apigee.net/v1/owner-sphere/b2b/123456789/suggestions" \
  -H "x-api-key: YOUR_API_KEY"
ูู ุงูู VerifyAPIKey ุดุบุงูุ ูู ุงูููุชุงุญ ุตุญูุญ ูุชูุตูู ููู backend response ุฃู ุฎุทุฃ ูู ุงูู backend.

ูู ุงูููุชุงุญ ุฎุทุฃ ุฃู ููููุฏุ ููุฑุฌุนูู Apigee ุฌูุงุจ 401/403 ูู ุณูุงุณุฉ ุงูุชุญูู.

ุฅูู ุงููู ูุชุญุณูู ุจุนุฏ ุนูู ุงูุฎุทูุงุช ุฏูุ
ุงูุจุฑููุณู ููุจุฏุฃ ูุทุจูู ุงูููู ุงูุฎุงุต ุจู suggestions ุนูู ุฃู GET ููุฌู ุนูู /v1/owner-sphere/b2b/{regNo}/suggestions.

ูู ุญุทูุช ุงูุณูุงุณุงุช ูู ุงูู PreFlow ุงูุนุงูุ ููุชู ุงูุชุญูู ูุจู ุฃู ููู โ ูุฏู ูููุณ ููุฃูุงู.

ูููู ูู ุชุญุจ:

ุฃุนูู ูู ููุณ ุงูุจููู ุจุฏูู ุชูุฑุงุฑ ููู VerifyAPIKey ู AmeenSecurityCheck (ูู ููุง ููุฌูุฏูู ุจุงููุนู ูู PreFlow ุงูุนุงู)ุ ุฃู

ุฃุณุงุนุฏู ุชุนูู ุงุฎุชุจุงุฑ ุงูุขู ุฎุทูุฉ ุจุฎุทูุฉ (ุงุฑุณููู ุงูู Consumer Key ุฃู ูููู ูุชุณุชุฎุฏู Postman ูุฃูุง ุฃูุชุจูู ุฅุนุฏุงุฏุงุช ุงูุทูุจ).

ูุฑุฌุน ุฎุทูุฉ ุจุฎุทูุฉ โ ููู ูู ุชุญุจ ุฃุนูู ุฅูู ุจุนุฏ ูุง ุชูุตู ุงูููุฏ ูุชุนูู Saveุ

You said:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
<Description/>
<FaultRules/>
<PreFlow name="PreFlow">
<Request>
<Step>
<Name>VerifyAPIKey</Name>
</Step>
<Step>
<Name>AmeenSecurityCheck</Name>
</Step>
</Request>
<Response/>
</PreFlow>
<PostFlow name="PostFlow">
<Request/>
<Response/>
</PostFlow>
<Flows>
<Flow name="Get Suggested Establishments">
<Description>Get Suggested Establishments</Description>
<Request/>
<Response/>
<Condition>(proxy.pathsuffix MatchesPath "") and (request.verb = "GET")</Condition>
</Flow>
</Flows>
<HTTPProxyConnection>
<BasePath>/v1/owner-sphere/b2b</BasePath>
<Properties/>
<VirtualHost>AmeenVH</VirtualHost>
</HTTPProxyConnection>
<RouteRule name="default">
<TargetEndpoint>default</TargetEndpoint>
</RouteRule>
</ProxyEndpoint>
ChatGPT said:
ุชูุงู ุฌุฏูุง ๐ุ ุฅูุช ูุฑูุจ ุฌุฏูุง ูู ุงูุตุญ โ ุจุณ ูุญุชุงุฌ ุชุนุฏูู ุจุณูุท ุฌุฏูุง ูู ุงูู Flow.
ุฎูููุง ูุดุฑุญ ุจุณุฑุนุฉ ููุนููู ุงููุณุฎุฉ ุงููุนุฏููุฉ ุงูุฌุงูุฒุฉ.

๐ ุงููุดููุฉ ููู ุจุงูุถุจุท:
ูู ุงูุณุทุฑ ุฏู:

<Condition>(proxy.pathsuffix MatchesPath "") and (request.verb = "GET")</Condition>
ุฅูุช ุณุงูุจ ุงูู MatchesPath ูุงุถู ("")ุ ูุนูู ุงูููู ููุดุชุบู ุนูู ุงููุณุงุฑ ุงูุฌุฐุฑู (/v1/owner-sphere/b2b) ููุท โ
ููู ุฅุญูุง ุนุงูุฒููู ูุดุชุบู ููุง ุงููุณุงุฑ ูููู ุจุงูุดูู:

/v1/owner-sphere/b2b/{regNo}/suggestions
โ ุงูุญู:
ุงุณุชุจุฏู ุงูููู ููู ุจุงููุณุฎุฉ ุงูุตุญูุญุฉ ุฏู:

<Flow name="Get Suggested Establishments">
  <Description>Get Suggested Establishments</Description>

  <Request/>
  <Response/>

  <!-- ุงูุดุฑุท ุงูุตุญ -->
  <Condition>(proxy.pathsuffix MatchesPath "/{regNo}/suggestions") and (request.verb = "GET")</Condition>
</Flow>
๐ง ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ููููู ุจุนุฏ ุงูุชุนุฏูู:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProxyEndpoint name="default">
  <Description/>
  <FaultRules/>

  <PreFlow name="PreFlow">
    <Request>
      <Step>
        <Name>VerifyAPIKey</Name>
      </Step>
      <Step>
        <Name>AmeenSecurityCheck</Name>
      </Step>
    </Request>
    <Response/>
  </PreFlow>

  <PostFlow name="PostFlow">
    <Request/>
    <Response/>
  </PostFlow>

  <Flows>
    <Flow name="Get Suggested Establishments">
      <Description>Get Suggested Establishments</Description>

      <Request/>
      <Response/>

      <!-- ููุง ุงููุณุงุฑ ุงูุตุญูุญ -->
      <Condition>(proxy.pathsuffix MatchesPath "/{regNo}/suggestions") and (request.verb = "GET")</Condition>
    </Flow>
  </Flows>

  <HTTPProxyConnection>
    <BasePath>/v1/owner-sphere/b2b</BasePath>
    <Properties/>
    <VirtualHost>AmeenVH</VirtualHost>
  </HTTPProxyConnection>

  <RouteRule name="default">
    <TargetEndpoint>default</TargetEndpoint>
  </RouteRule>
</ProxyEndpoint>
๐งช ุจุนุฏ ูุฏู ุงุนูู ุงูุขุชู:
ุงุถุบุท Save.

ุงุถุบุท Deploy ุนูู environment intranet.

ุงุฎุชุจุฑ ุงูุทูุจ ุฏู:

curl -i -X GET "https://ameenfea12.apigee.net/v1/owner-sphere/b2b/123456789/suggestions" \
  -H "x-api-key: YOUR_API_KEY"
ูู ูู ุญุงุฌุฉ ุชูุงูุ Apigee ูููุตู ุงูุทูุจ ููู Target Endpoint (backend)ุ ุฃู ููุฑุฌุน Error ูู backend ูู ูู ูุดููุฉ ููุงู.

ูู ุชุญุจ ุฏูููุชู ูููู ููุฑุจุท ุงูู Target Endpoint (ุงููู ูู ูุณุงุฑ ุงูุณูุฑูุณ ุงููุนูู ุงููู ุจูุฑุฌุน ุงูุจูุงูุงุช ูู ุงูู backend)ุ

You said:

ูุฑุฌุน ูููุถูุนูุง, ุงูู ุงูุฎุทูู ุงููู ุจุนุฏ ูุฏู
ChatGPT said:
ุชูุงู ๐ชุ ุฅูุช ูุฏู ุฎูุตุช ุงููุฑุญูุฉ ุงูุชุงููุฉ ุจูุฌุงุญ (ุชุนุฑูู ุงูู Flow ูู ุงูู Proxy).
ุฏูููุชู ูุจุฏุฃ ุงูุฎุทูุฉ ุงูุชุงูุชุฉ ๐

๐งฉ ุงูุฎุทูุฉ ุงูุซุงูุซุฉ: ุฑุจุท ุงูู Target Endpoint ุจุงูุณูุฑูุฑ ุงููุนูู
ุฏู ุงููุฑุญูุฉ ุงููู ูููุง ุจุชุญุฏุฏ:

ุงูู backend server ุงููู Apigee ูุจุนุซ ูู ุงูุฑููููุณุช ุจุนุฏ ูุง ูุชุญูู ูู ุงูู policies.

ูููุงู ุชุญุฏุฏ ุงููุณุงุฑ ุงูุฏุงุฎูู (path) ุงููู ุจูุฑูุญ ุนููู ุงูุฑููููุณุช ุฏุงุฎู ุงูู backend.

1๏ธโฃ ุงูุชุญ ููู:
/apiproxy/targets/default.xml
ุฅูุช ุญุงูููุง ุนูุฏู ูุณุฎุฉ ุดุจู ุฏู:

<TargetEndpoint name="default">
  <Description/>
  <FaultRules/>
  <PreFlow name="PreFlow">
    <Request>
      <Step>
        <Name>VerifyAPIKey</Name>
      </Step>
      <Step>
        <Name>AmeenSecurityCheck</Name>
      </Step>
    </Request>
    <Response/>
  </PreFlow>
  <PostFlow name="PostFlow">
    <Request/>
    <Response/>
  </PostFlow>
  <Flows/>
  <HTTPTargetConnection>
    <LoadBalancer>
      <Server name="APPServer"/>
    </LoadBalancer>
    <Path>/owner-sphere/b2b</Path>
  </HTTPTargetConnection>
</TargetEndpoint>
2๏ธโฃ ูุญุชุงุฌ ูุชุฃูุฏ ูู ุญุงุฌุชูู:
โ ุฃููุงู: ุงูุณูุฑูุฑ ุงููู ุงุณูู APPServer ูุชุณุฌู ูู Apigee.
ุฑูุญ ุนูู:

Admin โ Environments โ Target Servers

ูุชุฃูุฏ ุฅู ููู ุณูุฑูุฑ ุงุณูู APPServer
ููู ูุด ููุฌูุฏุ ูุงุฒู ุชุถููู ูุฏูููุง ูุชุญุฏุฏ ูู:

Name: APPServer

Host: IP ุฃู hostname ุจุชุงุน ุงูุณูุฑูุฑ ุงููุนูู
(ูุซูุงู: ownersphere-be.intranet.gosi.gov.sa)

Port: ุบุงูุจูุง 8080 ุฃู 443 ุญุณุจ ุงูุจูุฆุฉ

SSL Info: (ุงุฎุชูุงุฑู ูู ุจุชุณุชุฎุฏู HTTPS)

โ ุซุงูููุง: ุชุฃูุฏ ุฅู ุงูู <Path> ูู ุงูููู ูู ููุณ ุงููุณุงุฑ ุงููู backend ุจูุชููุนู.
ูุซูุงู:
ูู backend ุจูุณุชูุจู ุงูุฑููููุณุช ุนูู:

http://ownersphere-be.intranet.gosi.gov.sa/api/v1/establishments/{regNo}/suggestions
ูุจูู ูุงุฒู ุงูู <Path> ูููู:

<Path>/api/v1/establishments</Path>
Apigee ููุถูู ุนูููุง ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูุฑููููุณุช (/{regNo}/suggestions) ุฃูุชููุงุชูู ูุฃููุง ุฌุงูุฉ ูู ุงูู proxy path.

โ ุงูุดูู ุงูููุงุฆู ุงูููุชุฑุญ:
<TargetEndpoint name="default">
  <HTTPTargetConnection>
    <LoadBalancer>
      <Server name="APPServer"/>
    </LoadBalancer>
    <Path>/api/v1/establishments</Path>
  </HTTPTargetConnection>
</TargetEndpoint>
๐ ุจุนุฏ ุงูุชุนุฏูู:
ุงุญูุธ ุงูููู.

ุงุนูู Deploy ููู API Proxy ุนูู environment intranet.

ุงุฎุชุจุฑ ุงูุฑููููุณุช ุจููุณ ุงูู curl ุงููู ุงุณุชุฎุฏููุงู ูุจู ูุฏู.

ูู ุชุญุจ ุฃูููู ุจุงูุถุจุท ุฅุฒุงู ุชุถูู ุงูุณูุฑูุฑ APPServer ูู Apigee (ุฎุทูุฉ ุจุฎุทูุฉ ูู ุงููุงุฌูุฉ)ุ

You said:
ุงูู ุงูุฎุทูู ุงููู ุจุนุฏูุง
ChatGPT said:
ุชูุงู ๐ุ
ุจูุง ุฅูู ุฎูุตุช ุงูุฎุทูุฉ ุงูุชุงูุชุฉ (ุฑุจุท ุงูู Target Endpoint ุจุงูุณูุฑูุฑ ุงููุนูู)ุ ูุฏูููุชู ููุฌู ูู ุงูุฎุทูุฉ ุงูุฑุงุจุนุฉ ููู ุงููุฑุญูุฉ ุงููู ุจูุจุฏุฃ ูููุง ุงูุงุฎุชุจุงุฑ ูุงูุชุฃูุฏ ุฅู ูู ุญุงุฌุฉ ุดุบุงูุฉ ุตุญ โ

๐งพ ุงูุฎุทูุฉ ุงูุฑุงุจุนุฉ: ุงุฎุชุจุงุฑ ุงูู API Proxy ูุนูููุง
ุงููุฏู ููุง ุฅูู ุชุชุฃูุฏ ุฅู:

ุงูุฑููููุณุช ุจููุฑ ุนูู ุงูู policies ุงููู ุถูุชูุง (VerifyAPIKey + AmeenSecurityCheck)

ุงูุฑููููุณุช ุจูุฑูุญ ููุณูุฑูุฑ ุงููุนูู (backend)

ุงูุฑูุณุจููุณ ุจูุฑุฌุน ุณููู ูู ุงูู backend

1๏ธโฃ ุฃูู ุญุงุฌุฉ: ุงูุญุตูู ุนูู ุงูู API Key
ูู ุดุงุดุฉ ุงูู Developer App ุงููู ุงุณููุง OwnerSphereApp:

ุฑูุญ ุนูู ูุณู Credentials

ูุชูุงูู Consumer Key ู Consumer Secret

ุฎูุฏ ุงูู Consumer Key โ ุฏู ูู ุงูู apikey ุงููู ูุชุณุชุฎุฏูู ูู ุงูุฑููููุณุช

2๏ธโฃ ุงุฎุชุจุฑ ุจุงุณุชุฎุฏุงู Curl (ุฃู Postman)
ูุซูุงู:

curl -X GET \
  'https://ameenfea12-intranet.apigee.net/v1/owner-sphere/b2b/establishments/123456789/suggestions' \
  -H 'apikey: <YOUR_CONSUMER_KEY>'
โ ุงุณุชุจุฏู <YOUR_CONSUMER_KEY> ุจุงูู key ุงููู ุฌุจุชู ูู ุงูู App

3๏ธโฃ ูู ุงูู API ุดุบุงู ุตุญ ูุชุดูู:
Status 200 OK

Response JSON ุฑุงุฌุน ูู ุงูู backend
(ูุซูุงู ูุงุฆูุฉ ุงูู establishments ุงูููุชุฑุญุฉ)

4๏ธโฃ ูู ุญุตู ุฎุทุฃ:
ุงูุญุงูุฉ	ุงูุณุจุจ ุงููุญุชูู	ุงูุญู
401 Unauthorized	ุงูู API Key ุบูุท ุฃู policy ูุดูุช	ุชุฃูุฏ ูู ุฅูู ุจุชุญุท ุงูู key ุงูุตุญูุญ
403 Forbidden	Policy AmeenSecurityCheck ุฑูุถุช ุงูุฑููููุณุช	ุฑุงุฌุน ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ูู ุงูู policy
404 Not Found	ุงูู path ูู ุงูู Target ุบูุท	ุชุฃูุฏ ูู <Path> ูู target/default.xml
500 Internal Server Error	backend ููู ูุดููุฉ	ุฌุฑุจ ุชุถุฑุจ backend ูุจุงุดุฑุฉ
5๏ธโฃ ูู ูู ุญุงุฌุฉ ุงุดุชุบูุช โ
ูุจูู ูุฏู:

ุงูู proxy endpoint ุดุบุงู

ุงูู policies ุจุชุชุทุจู

ุงูู route ููู backend ุณููู

ูุชูุฏุฑ ุจุนุฏ ูุฏู ุชูุชูู ููุฎุทูุฉ ุงูุฎุงูุณุฉ ๐

๐ ุงูุฎุทูุฉ ุงูุฎุงูุณุฉ (ุงูุงุฎุชูุงุฑูุฉ): ุชูุนูู ุงูู OAuth 2.0 ุฃู ุฅุถุงูุฉ Limits
ุจุนุฏ ูุง ุชุชุฃูุฏ ุฅู ูู ุญุงุฌุฉ ุดุบุงูุฉุ ุชูุฏุฑ ุชุถูู:

OAuth v2.0 policy ูู ุนุงูุฒ ุญูุงูุฉ ุฃููู ูู ูุฌุฑุฏ API key

ุฃู Spike Arrest / Quota ูู ุนุงูุฒ ุชุญุฏุฏ ุนุฏุฏ ุงูุทูุจุงุช ูู ุงูุฏูููุฉ ุฃู ุงูุณุงุนุฉ

ูู ุนุงูุฒ ูููู ูู ุงูุฎุทูุฉ ุงูุฎุงูุณุฉ ุฏู (ุชูุนูู OAuth ุฃู ุฅุถุงูุฉ Rate Limit) ููุง ุชูุถู ูุนูู ุงุฎุชุจุงุฑ ุนููู ูุน curl ุงูุฃููุ

You said:
ุงูุง ูุนููุชุด ุญุงุฌู ูู ุงูุจุงู ุงูุฏ ุจุชุงุนู ูุญุฏ ูููุช
ChatGPT said:
ุชูุงู ๐ก ุฏู ุชูุถูุญ ููู ุฌุฏูุง โ ุฎูููุง ููุถุญ ุงูุตูุฑุฉ ุจูุฏูุก ูุงุญุฏุฉ ูุงุญุฏุฉ ๐

๐ฏ ุงููุถุน ุงูุญุงูู
ุฅูุช ุฏูููุชู ุฎูุตุช ุฅุนุฏุงุฏ ุงูู API Proxy ูู Apigee โ
ููู ูุณู ูุง ุฑุจุทุชุด ุงูุจุฑููุณู ูุนูููุง ุจุงูู backend (ูุนูู ุงูุณูุฑูุฑ ุงููู ููู ุงูู APIs ุงูุฃุตููุฉ ุจุชุงุนุฉ Owner Sphere).

ุจุงูุชุงูู:

Apigee ุฏูููุชู ูุณุชูุจู ุงูุฑููููุณุช ุนูู /v1/owner-sphere/b2b/...

ููู ููุง ููุตู ููู <TargetEndpoint> ูุง ููุงููุด backend ูุนูู ูุฑูุญ ูู
๐ ูููุฑุฌุน Error (ุฒู 404 ุฃู 502 Bad Gateway)

โ๏ธ ุงููุฑุญูุฉ ุงููู ูุญุชุงุฌูู ูุนูููุง ุฏูููุชู: ุฑุจุท Apigee ุจุงูู backend
ูุฏู ูู ุงูุฎุทูุฉ ุฑูู (3 ุงููู ููุง ุจูุชููู ุนููุง ุณุงุจููุง)ุ ููู ูููุตููุง ููุง ุนููููุง ๐

๐งฉ ุงูุฎุทูุฉ 1: ุชุฃูุฏ ุฅู ุนูุฏู Backend ูุนูู
ูุนูู ูุงุฒู ูููู ุนูุฏู API ุญููููุฉ ุชูุฏุฑ ุชูุตููุง ูุจุงุดุฑุฉ (ูุซูุงู ูู ุจูุฆุฉ DEV ุฃู UAT)
ุฒู:

https://dev.owner-sphere.gosi.gov.sa/api/v1/establishments/suggestions
ูู ูุณู ุงูู backend ูุง ุงุดุชุบูุด ุฃู ูุด ุฌุงูุฒ โ ูููุด ูุดููุฉ
ุชูุฏุฑ ูุคูุชูุง:

ุชุณุชุฎุฏู mock backend (ุฒู RequestBin ุฃู mock server ุจุณูุท)

ุฃู ุชุฎูู ุงูู TargetEndpoint ูุคูุชูุง ูุฑุฏ ุจุฑุฏ ุซุงุจุช (mock response ุฏุงุฎู Apigee)

๐งฑ ุงูุฎุทูุฉ 2: ุชุนุฏูู ุงูู TargetEndpoint
ุงูุชุญ ุงูููู:

/apiproxy/targets/default.xml
ูุฎููู ุจุงูุดูู ุฏู ูุคูุชูุง ูู ุนูุฏู backend ุญูููู:

<TargetEndpoint name="default">
  <HTTPTargetConnection>
    <URL>https://dev.owner-sphere.gosi.gov.sa/api</URL>
  </HTTPTargetConnection>
</TargetEndpoint>
โ ูุงุญุธ: ููุง ุจูุณุชุฎุฏู <URL> ุจุฏู <LoadBalancer> ูุฃูู ุบุงูุจูุง ูุชุณุชุฎุฏู endpoint ูุงุญุฏ ูุด cluster.
ุงููุณุงุฑ /api ูู base path ููุณูุฑูุฑ ุงููุนูู โ ุนุฏูู ุญุณุจ ุจูุฆุชู.

๐ ุงูุฎุทูุฉ 3: Deploy ุงูุชุบููุฑุงุช ูู ุฌุฏูุฏ
ุจุนุฏ ุงูุชุนุฏูู:

ุงุนูู Save

ุงุนูู Deploy ููู Proxy ุนูู ุงูุจูุฆุฉ ุงูููุงุณุจุฉ (intranet ุฃู test)

ุฌุฑุจ ุชุจุนุช ุฑููููุณุช ุชุงูู ุจุงูู apikey

๐งช ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ (ุจู Curl ุฃู Postman)
curl -X GET \
  'https://ameenfea12-intranet.apigee.net/v1/owner-sphere/b2b/establishments/suggestions' \
  -H 'apikey: <YOUR_CONSUMER_KEY>'
ูู ุงูู backend ุดุบุงู ููุฑุจูุท ุตุญ ูุชุดูู response ูุนูู ๐ฅ
ูู ูุณู backend ูุด ุฌุงูุฒุ Apigee ููุญุงูู ููุตูู ููุฑุฌุนูู ุฎุทุฃ 502 ุฃู timeout.

ูู ุนุงูุฒูู ุฃูุฑูู ุฅุฒุงู ุชุนูู mock backend ูุคูุช ุฏุงุฎู Apigee ุจุญูุซ ุชูุฏุฑ ุชุฎุชุจุฑ ูู ุญุงุฌุฉ ูู ุบูุฑ backend ูุนููุ
(ุฏู ูููุฏ ุฌุฏูุง ูู backend ูุณู ูุด ูุชุงุญ.)




No file chosenNo file chosen
ChatGPT can make mistakes. Check important info.
